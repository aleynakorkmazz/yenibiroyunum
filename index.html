<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aleyna Korkmaz | YKS Dev Platform v6.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c5ce7; --secondary: #00cec9; --accent: #ff7675; --dark: #2d3436;
            --light: #dfe6e9; --glass: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.5); --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }
        body { font-family: 'Outfit', sans-serif; margin: 0; padding: 0; background: linear-gradient(-45deg, #a8c0ff, #3f2b96, #ee9ca7, #ffdde1); background-size: 400% 400%; animation: gradientBG 15s ease infinite; color: var(--dark); min-height: 100vh; overflow-x: hidden; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* VERSƒ∞YON ROZETƒ∞ */
        .version-badge { position: fixed; top: 20px; right: 30px; background: rgba(255,255,255,0.25); backdrop-filter: blur(5px); padding: 8px 15px; border-radius: 20px; color: white; font-weight: 800; font-size: 0.9rem; z-index: 2000; border: 1px solid rgba(255,255,255,0.3); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }

        /* NAVƒ∞GASYON */
        nav { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 1000px; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); padding: 10px 30px; border-radius: 50px; display: flex; justify-content: space-between; align-items: center; box-shadow: var(--shadow); z-index: 1000; border: 1px solid var(--glass-border); }
        .logo { font-size: 1.3rem; font-weight: 800; color: var(--primary); cursor: pointer; text-transform: uppercase; letter-spacing: 1px; }
        .nav-links { display: flex; gap: 20px; }
        .nav-item { cursor: pointer; font-weight: 600; padding: 8px 16px; border-radius: 20px; transition: 0.3s; color: var(--dark); font-size: 0.9rem; }
        .nav-item:hover { background: var(--primary); color: white; }

        /* HERO & MOTƒ∞VASYON */
        header.hero { text-align: center; padding: 140px 20px 60px; color: white; position: relative; }
        .hero h1 { font-size: 3.5rem; margin: 0; font-weight: 800; text-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .hero p { font-size: 1.2rem; opacity: 0.9; margin-top: 10px; font-weight: 300; }
        .motivation-box { margin-top: 30px; display: inline-block; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 15px 30px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.4); animation: float 4s ease-in-out infinite; }
        .motivation-box i { color: #ffd700; margin-right: 10px; }
        #dailyQuote { font-style: italic; font-weight: 600; color: white; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px 40px; }

        /* KARTLAR */
        .home-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; }
        .feature-card { background: var(--glass); backdrop-filter: blur(16px); border-radius: 24px; overflow: hidden; box-shadow: var(--shadow); transition: 0.4s; cursor: pointer; border: 1px solid white; }
        .feature-card:hover { transform: translateY(-10px) scale(1.02); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        .card-header-visual { height: 140px; display: flex; align-items: center; justify-content: center; font-size: 4rem; color: white; }
        .bg-notes { background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); }
        .bg-games { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); }
        .bg-movies { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }
        .card-body { padding: 30px; text-align: center; }
        .card-body h3 { margin: 0 0 10px; color: var(--dark); font-size: 1.6rem; font-weight: 800; }
        .card-body p { color: #636e72; font-size: 0.95rem; line-height: 1.6; }

        /* MODAL & ƒ∞√áERƒ∞K */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); z-index: 2000; justify-content: center; align-items: center; animation: fadeIn 0.3s ease; }
        .modal-content { background: #fdfdfd; width: 95%; max-width: 1300px; max-height: 90vh; border-radius: 30px; overflow-y: auto; position: relative; box-shadow: 0 25px 50px rgba(0,0,0,0.3); display: flex; flex-direction: column; padding: 0; border: 1px solid white; }
        .modal-header-bar { padding: 20px 30px; background: white; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10; border-radius: 30px 30px 0 0; }
        .close-btn { font-size: 2rem; cursor: pointer; color: #ff7675; transition: 0.2s; }
        .subject-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; padding: 10px; }
        .sub-btn { padding: 15px; text-align: center; background: white; border-radius: 16px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; transition: 0.3s; font-weight: 700; color: var(--dark); border: 2px solid transparent; display: flex; flex-direction: column; gap: 5px; align-items: center; }
        .sub-btn:hover { border-color: var(--primary); transform: translateY(-3px); background: #f8f9fa; }
        .sub-btn i { font-size: 1.5rem; color: var(--primary); }
        .topic-container { padding: 30px; display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        .topic-group { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.03); border: 1px solid #f0f0f0; transition:0.3s; height: fit-content; }
        .topic-head { font-size: 1.1rem; font-weight: 800; color: var(--primary); margin-bottom: 15px; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .tag { font-size: 0.7rem; padding: 4px 8px; border-radius: 6px; color: white; letter-spacing: 1px; }
        .tag.tyt { background: linear-gradient(45deg, #00b894, #55efc4); } .tag.ayt { background: linear-gradient(45deg, #d63031, #ff7675); }
        .flashcards { display: flex; flex-direction: column; gap: 10px; }
        .card { background: #fdfdfd; padding: 12px; border-radius: 10px; border-left: 4px solid var(--secondary); transition: 0.2s; border: 1px solid #f5f5f5; }
        .card h5 { margin: 0 0 5px; color: #2d3436; font-size: 0.95rem; font-weight: 700; }
        .card p { font-size: 0.85rem; color: #636e72; margin: 0; line-height: 1.4; }

        /* OYUN & CINEBOT */
        #game-modal-content { background: #151515; color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; min-height: 100%; justify-content: center; }
        canvas { background: #000; border: 4px solid #333; border-radius: 12px; margin: 10px 0; box-shadow: 0 0 40px rgba(108, 92, 231, 0.4); }
        .game-controls { display: flex; gap: 30px; font-family: 'Courier New', monospace; font-size: 1.3rem; font-weight: bold; margin-bottom: 10px; background: #222; padding: 10px 30px; border-radius: 30px; }
        .stat-box span { color: var(--secondary); }
        .game-overlay { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); flex-direction: column; justify-content: center; align-items: center; z-index: 50; }
        .btn-play { background: var(--success); color: white; padding: 15px 50px; border: none; border-radius: 50px; font-size: 1.2rem; cursor: pointer; margin: 10px; font-weight: bold; }
        .btn-exit { background: transparent; color: white; border: 2px solid white; padding: 10px 40px; border-radius: 50px; cursor: pointer; margin-top:10px; }
        .ai-widget-btn { position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; cursor: pointer; box-shadow: 0 10px 30px rgba(108, 92, 231, 0.5); z-index: 3000; animation: pulse 2s infinite; border: 2px solid white; }
        .chat-container { position: fixed; bottom: 120px; right: 30px; width: 380px; height: 600px; background: white; border-radius: 25px; box-shadow: 0 25px 60px rgba(0,0,0,0.3); z-index: 2999; display: none; flex-direction: column; overflow: hidden; border: 1px solid #eee; }
        .chat-header { background: var(--primary); color: white; padding: 20px; font-weight: 700; display: flex; justify-content: space-between; align-items: center; }
        .chat-tabs { display: flex; background: #f9f9f9; border-bottom: 1px solid #eee; }
        .chat-tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-weight: 600; color: #777; transition: 0.3s; }
        .chat-tab.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: white; }
        .chat-body { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; background: #fdfdfd; }
        .msg { padding: 12px 18px; border-radius: 20px; max-width: 85%; font-size: 0.95rem; line-height: 1.5; }
        .bot { background: #f1f2f6; color: #333; align-self: flex-start; } .user { background: var(--primary); color: white; align-self: flex-end; }
        .chat-input-area { padding: 15px; border-top: 1px solid #eee; display: flex; gap: 10px; background: white; }
        .chat-input { flex: 1; padding: 12px 20px; border: 1px solid #dfe6e9; border-radius: 30px; outline: none; }
        .chat-send { background: var(--primary); color: white; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; }
        .movie-card-chat { background: #fff; border: 1px solid #eee; padding: 15px; border-radius: 12px; margin-top: 10px; font-size: 0.9rem; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .btn-sm { font-size: 0.85rem; padding: 10px; border-radius: 10px; border:none; cursor: pointer; margin-top: 8px; width: 100%; display:block; font-weight: 600; }
        .btn-watch { background: #00b894; color: white; } .btn-add { background: #dfe6e9; color: var(--dark); }
        .watchlist-container { display: none; padding: 15px; overflow-y: auto; flex:1; }
        .w-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #eee; }
        .w-remove { color: #ff7675; cursor: pointer; }
        
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(108, 92, 231, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(108, 92, 231, 0); } 100% { box-shadow: 0 0 0 0 rgba(108, 92, 231, 0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="version-badge">v6.0 Ultimate</div>

    <nav>
        <div class="logo" onclick="location.reload()">ALEYNA KORKMAZ</div>
        <div class="nav-links">
            <div class="nav-item" onclick="openNotes()"><i class="fa-solid fa-book"></i> Ders Notlarƒ±</div>
            <div class="nav-item" onclick="openGameMenu()"><i class="fa-solid fa-gamepad"></i> Oyunlar</div>
            <div class="nav-item" onclick="toggleChat(true)"><i class="fa-solid fa-robot"></i> CineBot</div>
        </div>
    </nav>

    <header class="hero">
        <h1>Ho≈ü Geldiniz</h1>
        <p>Matematik √ñƒürencisi & Veri Analisti Adayƒ±</p>
        <div class="motivation-box">
            <i class="fa-solid fa-bolt"></i>
            <span id="dailyQuote">G√ºn√ºn s√∂z√º y√ºkleniyor...</span>
        </div>
    </header>

    <div class="container">
        <div class="home-grid">
            <div class="feature-card" onclick="openNotes()">
                <div class="card-header-visual bg-notes"><i class="fa-solid fa-book-open"></i></div>
                <div class="card-body"><h3>YKS Dev Ar≈üiv</h3><p>T√ºm dersler i√ßin 100+ konu ve 500+ not kartƒ±.</p></div>
            </div>
            <div class="feature-card" onclick="openGameMenu()">
                <div class="card-header-visual bg-games"><i class="fa-solid fa-gamepad"></i></div>
                <div class="card-body"><h3>Oyunlar</h3><p>60 FPS akƒ±cƒ± 3D Yƒ±lan, Pro Tetris ve Arcade Pacman.</p></div>
            </div>
            <div class="feature-card" onclick="toggleChat(true)">
                <div class="card-header-visual bg-movies"><i class="fa-solid fa-film"></i></div>
                <div class="card-body"><h3>CineBot AI</h3><p>Yapay zeka film √∂nerileri, konularƒ± ve izleme listesi.</p></div>
            </div>
        </div>
    </div>

    <div id="notesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header-bar"><h2 style="margin:0; color:var(--primary);">Ders Se√ßiniz</h2><span class="close-btn" onclick="closeModal('notesModal')">&times;</span></div>
            <div style="padding: 30px;">
                <div class="subject-grid">
                    <div class="sub-btn" onclick="loadSubject('Matematik')"><i class="fa-solid fa-calculator"></i>Matematik</div>
                    <div class="sub-btn" onclick="loadSubject('Fizik')"><i class="fa-solid fa-atom"></i>Fizik</div>
                    <div class="sub-btn" onclick="loadSubject('Kimya')"><i class="fa-solid fa-flask"></i>Kimya</div>
                    <div class="sub-btn" onclick="loadSubject('Biyoloji')"><i class="fa-solid fa-dna"></i>Biyoloji</div>
                    <div class="sub-btn" onclick="loadSubject('Tarih')"><i class="fa-solid fa-landmark"></i>Tarih</div>
                    <div class="sub-btn" onclick="loadSubject('Coƒürafya')"><i class="fa-solid fa-globe"></i>Coƒürafya</div>
                    <div class="sub-btn" onclick="loadSubject('Edebiyat')"><i class="fa-solid fa-feather"></i>Edebiyat</div>
                </div>
                <hr style="margin: 30px 0; border: 0; border-top: 1px solid #eee;">
                <h2 id="subjectTitle" style="color: var(--dark); font-size:1.5rem; margin-bottom:20px;">Konular</h2>
                <div id="topicContainer" class="topic-container"></div>
            </div>
        </div>
    </div>

    <div id="gamesMenuModal" class="modal">
        <div class="modal-content" style="max-width: 450px; text-align: center; padding: 50px; background:#2d3436; border:none;">
            <span class="close-btn" style="color:white; top:20px; right:20px;" onclick="closeModal('gamesMenuModal')">&times;</span>
            <h2 style="color:white; margin-bottom:30px;">Oyun Se√ß</h2>
            <div style="display: grid; gap: 20px;">
                <button class="btn-play" style="background:#6c5ce7; width:100%; margin:0;" onclick="initGame('snake')">üêç Neon Yƒ±lan</button>
                <button class="btn-play" style="background:#0984e3; width:100%; margin:0;" onclick="initGame('tetris')">üß± Pro Tetris</button>
                <button class="btn-play" style="background:#fd79a8; width:100%; margin:0;" onclick="initGame('pacman')">üëª Arcade Pacman</button>
            </div>
        </div>
    </div>

    <div id="gameModal" class="modal" style="background: black;">
        <div id="game-modal-content">
            <div style="width: 100%; text-align: right; max-width:600px;"><span onclick="stopGame()" style="color:white; cursor:pointer; border:1px solid white; padding:5px 15px; border-radius:20px;">KAPAT</span></div>
            <div style="position: relative;">
                <div id="gameOverOverlay" class="game-overlay"><h1 style="color: var(--accent); font-size: 3rem;">Bƒ∞TTƒ∞</h1><p style="color: white; font-size: 1.5rem;">SKOR: <span id="finalScore">0</span></p><button class="btn-play" onclick="restart()">TEKRAR</button></div>
                <canvas id="gameCanvas"></canvas>
            </div>
            <div class="game-controls"><div class="stat-box">Skor: <span id="scoreVal">0</span></div><div class="stat-box">Lvl: <span id="levelVal">1</span></div><div class="stat-box" id="livesContainer">Can: <span id="livesVal">3</span></div></div>
            <div id="nextPieceContainer" style="display:none; position:absolute; right:20px; top:100px; border:2px solid #444; padding:15px; background:#111; border-radius:10px;"><div style="font-size:0.8rem; color:#aaa; margin-bottom:10px;">SONRAKƒ∞</div><canvas id="nextCanvas" width="80" height="80" style="border:none; background:transparent;"></canvas></div>
        </div>
    </div>

    <div class="ai-widget-btn" onclick="toggleChat()"><i class="fa-solid fa-comment-dots"></i></div>
    <div id="cineBot" class="chat-container">
        <div class="chat-header"><span><i class="fa-solid fa-film"></i> CineBot</span><span style="cursor:pointer" onclick="toggleChat()">&times;</span></div>
        <div class="chat-tabs">
            <div class="chat-tab active" onclick="switchTab('chat')">Sohbet</div>
            <div class="chat-tab" onclick="switchTab('list')">Listem</div>
        </div>
        <div id="chatView" class="chat-body"><div class="msg bot">Merhaba! Film t√ºr√º yaz (Komedi, Korku vb.), sana konusunu anlatƒ±p √∂nereyim.</div></div>
        <div class="chat-input-area"><input type="text" id="chatInput" class="chat-input" placeholder="Yaz..." onkeypress="handleEnter(event)"><button class="chat-send" onclick="sendMessage()"><i class="fa-solid fa-paper-plane"></i></button></div>
        <div id="listView" class="watchlist-container" style="display:none;"><p style="text-align:center; color:#999; margin-top:20px;">Bo≈ü.</p></div>
    </div>

    <script>
        // --- MOTƒ∞VASYON ---
        const quotes = ["Bug√ºn √ßalƒ±≈ütƒ±ƒüƒ±n her dakika, yarƒ±n sana ba≈üarƒ± olarak d√∂necek.", "Yorulursan dinlenmeyi √∂ƒüren, bƒ±rakmayƒ± deƒüil.", "Hedefin g√ºne≈ü olsun, ƒ±skalarsan yƒ±ldƒ±zlara ula≈üƒ±rsƒ±n.", "Ba≈üarƒ± bir yolculuktur, bir varƒ±≈ü noktasƒ± deƒüil.", "Matematik sadece sayƒ±larƒ± deƒüil, hayatƒ± anlamanƒ±n yoludur.", "Zorluklar, potansiyelini ortaya √ßƒ±karman i√ßin fƒ±rsattƒ±r.", "ƒ∞nanmak, ba≈üarmanƒ±n yarƒ±sƒ±dƒ±r.", "Bir g√ºn deƒüil, her g√ºn isteyen kazanƒ±r.", "≈ûimdi √ßalƒ±≈ümazsan, ne zaman?"];
        document.getElementById('dailyQuote').innerText = quotes[Math.floor(Math.random() * quotes.length)];

        /* --- DEVASTA M√úFREDAT VERƒ∞TABANI --- */
        const curriculum = {
            "Matematik": [
                {t:"Temel Kavramlar", tag:"TYT", c:[{h:"Rakam",t:"{0..9} k√ºmesi. ƒ∞≈ülemlerde basamak deƒüeri √∂nemlidir."},{h:"Asal Sayƒ±",t:"Sadece 1 ve kendine b√∂l√ºn√ºr (2,3,5..). En k√º√ß√ºk asal 2'dir."},{h:"Ardƒ±≈üƒ±k Sayƒ±lar",t:"Belirli kurala g√∂re art arda gelen sayƒ±lar."}]},
                {t:"Sayƒ± Basamaklarƒ±", tag:"TYT", c:[{h:"√á√∂z√ºmleme",t:"ab = 10a + b. Sayƒ± deƒüeri ve basamak deƒüeri farkƒ±nƒ± unutma."},{h:"P√ºf Nokta",t:"Basamak deƒüeri toplamƒ± sayƒ±nƒ±n kendisine e≈üittir."}]},
                {t:"B√∂lme-B√∂l√ºnebilme", tag:"TYT", c:[{h:"3 ile",t:"Rakamlar toplamƒ± 3'√ºn katƒ± olmalƒ±."},{h:"4 ile",t:"Son iki basamak 00 veya 4'√ºn katƒ± olmalƒ±."},{h:"5 ile",t:"Son basamak 0 veya 5 olmalƒ±."}]},
                {t:"EBOB-EKOK", tag:"TYT", c:[{h:"EBOB",t:"En b√ºy√ºk ortak b√∂len. Par√ßadan b√ºt√ºne giderken kullanƒ±lƒ±r."},{h:"EKOK",t:"En k√º√ß√ºk ortak kat. B√ºt√ºnden par√ßaya giderken kullanƒ±lƒ±r."}]},
                {t:"Rasyonel Sayƒ±lar", tag:"TYT", c:[{h:"Tanƒ±m",t:"a/b, b sƒ±fƒ±r olamaz. Payda e≈üitlemeyi unutma."},{h:"Devirli",t:"(T√ºm√º - Devretmeyen) / (9 kadar devreden, 0 kadar devretmeyen)."}]},
                {t:"Basit E≈üitsizlikler", tag:"TYT", c:[{h:"Kural",t:"Negatif sayƒ± ile √ßarpƒ±lƒ±rsa e≈üitsizlik y√∂n deƒüi≈ütirir."}]},
                {t:"Mutlak Deƒüer", tag:"TYT", c:[{h:"Tanƒ±m",t:"|x| daima pozitiftir. Uzaklƒ±k belirtir."},{h:"√ñzellik",t:"|x| = |-x|"}]},
                {t:"√úsl√º Sayƒ±lar", tag:"TYT", c:[{h:"√áarpma",t:"Tabanlar aynƒ±ysa √ºsler toplanƒ±r."},{h:"B√∂lme",t:"Tabanlar aynƒ±ysa √ºsler √ßƒ±karƒ±lƒ±r."}]},
                {t:"K√∂kl√º Sayƒ±lar", tag:"TYT", c:[{h:"Tanƒ±m",t:"√úsl√º ifadenin tersidir. K√∂k i√ßi negatif olamaz (√ßift derecede)."}]},
                {t:"√áarpanlara Ayƒ±rma", tag:"TYT", c:[{h:"ƒ∞ki Kare Farkƒ±",t:"a¬≤-b¬≤ = (a-b)(a+b)"},{h:"Tam Kare",t:"(a+b)¬≤ = a¬≤+2ab+b¬≤"}]},
                {t:"Oran-Orantƒ±", tag:"TYT", c:[{h:"Kural",t:"ƒ∞√ßler dƒ±≈ülar √ßarpƒ±mƒ± e≈üittir."},{h:"Orantƒ± Sabiti",t:"k sabiti her zaman sabittir."}]},
                {t:"K√ºmeler", tag:"TYT", c:[{h:"Alt K√ºme",t:"2 √ºzeri n form√ºl√º."},{h:"Birle≈üim",t:"s(AuB) = s(A)+s(B)-s(AnB)"}]},
                {t:"Fonksiyonlar", tag:"TYT-AYT", c:[{h:"Tanƒ±m",t:"A'dan B'ye her eleman bir kez e≈üle≈üir."},{h:"Birebir",t:"Farklƒ± elemanlarƒ±n g√∂r√ºnt√ºs√º farklƒ±dƒ±r."},{h:"Ters",t:"y=x eksenine g√∂re simetriktir."}]},
                {t:"Polinomlar", tag:"AYT", c:[{h:"Derece",t:"En b√ºy√ºk √ºs derecedir."},{h:"Kalan",t:"B√∂leni sƒ±fƒ±ra e≈üitle, x'i yerine yaz."}]},
                {t:"2. Derece Denklem", tag:"AYT", c:[{h:"Delta",t:"b¬≤-4ac. >0 iki k√∂k, =0 tek k√∂k, <0 k√∂k yok."},{h:"K√∂kler Toplamƒ±",t:"-b/a"}]},
                {t:"Parabol", tag:"AYT", c:[{h:"Tepe Noktasƒ±",t:"r = -b/2a, k = f(r)."},{h:"Y√∂n",t:"a pozitifse kollar yukarƒ±."}]},
                {t:"Trigonometri", tag:"AYT", c:[{h:"Sin√ºs",t:"Kar≈üƒ±/Hipoten√ºs"},{h:"Kosin√ºs",t:"Kom≈üu/Hipoten√ºs"},{h:"Tan",t:"Sin/Cos"}]},
                {t:"Logaritma", tag:"AYT", c:[{h:"Kural",t:"√ústel fonksiyonun tersidir."},{h:"√áarpƒ±m",t:"log(xy) = logx + logy"}]},
                {t:"Diziler", tag:"AYT", c:[{h:"Aritmetik",t:"Artƒ±≈ü miktarƒ± sabit."},{h:"Geometrik",t:"Artƒ±≈ü oranƒ± sabit."}]},
                {t:"Limit", tag:"AYT", c:[{h:"Belirsizlik",t:"0/0 durumunda √ßarpanlara ayƒ±r veya t√ºrev al (L'Hospital)."}]},
                {t:"T√ºrev", tag:"AYT", c:[{h:"Anlam",t:"Anlƒ±k deƒüi≈üim oranƒ± ve teƒüetin eƒüimidir."},{h:"Ekstremum",t:"T√ºrevin i≈üaret deƒüi≈ütirdiƒüi noktalar."}]},
                {t:"ƒ∞ntegral", tag:"AYT", c:[{h:"Belirli",t:"Eƒüri altƒ±nda kalan alanƒ± verir."},{h:"Ters T√ºrev",t:"T√ºrevi alƒ±nan fonksiyonu bulma."}]}
            ],
            "Fizik": [
                {t:"Fizik Bilimine Giri≈ü", tag:"TYT", c:[{h:"Temel B√ºy√ºkl√ºkler",t:"Kƒ±sa Muz (K√ºtle, I≈üƒ±k, Sƒ±caklƒ±k, Akƒ±m, Madde, Uzunluk, Zaman)."}]},
                {t:"Madde ve √ñzellikleri", tag:"TYT", c:[{h:"√ñzk√ºtle",t:"d=m/V. Ayƒ±rt edicidir."},{h:"Dayanƒ±klƒ±lƒ±k",t:"Kesit Alanƒ± / Hacim."}]},
                {t:"Hareket ve Kuvvet", tag:"TYT", c:[{h:"Hƒ±z",t:"Yer deƒüi≈ütirme / Zaman (Vekt√∂rel)."}]},{t:"Enerji", tag:"TYT", c:[{h:"Kinetik",t:"1/2 mv¬≤"},{h:"Potansiyel",t:"mgh"}]},
                {t:"Isƒ± ve Sƒ±caklƒ±k", tag:"TYT", c:[{h:"√ñzƒ±sƒ±",t:"m.c.deltaT. Ayƒ±rt edicidir."}]},
                {t:"Elektrostatik", tag:"TYT", c:[{h:"Coulomb",t:"Y√ºkler arasƒ± kuvvet. Uzaklƒ±ƒüƒ±n karesiyle ters orantƒ±lƒ±."}]},
                {t:"Elektrik Akƒ±mƒ±", tag:"TYT", c:[{h:"Ohm",t:"V=I.R"}]},
                {t:"Optik", tag:"TYT", c:[{h:"Yansƒ±ma",t:"Gelme a√ßƒ±sƒ± yansƒ±maya e≈üittir."},{h:"Kƒ±rƒ±lma",t:"Az yoƒüundan √ßok yoƒüuna normale yakla≈üƒ±r."}]},
                {t:"Dalgalar", tag:"TYT", c:[{h:"Periyot",t:"Bir dalga i√ßin ge√ßen s√ºre."}]},
                {t:"Vekt√∂rler", tag:"AYT", c:[{h:"Bile≈üke",t:"U√ß uca ekleme."}]},
                {t:"Baƒüƒ±l Hareket", tag:"AYT", c:[{h:"Form√ºl",t:"Vbaƒüƒ±l = Vcisim - Vg√∂zlemci."}]},
                {t:"Newton Yasalarƒ±", tag:"AYT", c:[{h:"Temel Yasa",t:"F=ma"}]},
                {t:"Atƒ±≈ülar", tag:"AYT", c:[{h:"Serbest D√º≈üme",t:"h=5t¬≤"}]},
                {t:"ƒ∞tme Momentum", tag:"AYT", c:[{h:"ƒ∞tme",t:"Kuvvet x Zaman. Momentum deƒüi≈üimine e≈üittir."}]},
                {t:"Tork", tag:"AYT", c:[{h:"Denge",t:"Kuvvet x Dik Uzaklƒ±k."}]},
                {t:"Elektrik Alan", tag:"AYT", c:[{h:"E",t:"F/q. +1 birimlik y√ºke etkiyen kuvvet."}]},
                {t:"Manyetizma", tag:"AYT", c:[{h:"Saƒü El",t:"Ba≈üparmak akƒ±m, 4 parmak manyetik alan."}]},
                {t:"√áembersel Hareket", tag:"AYT", c:[{h:"Merkezcil Kuvvet",t:"Merkeze doƒürudur. mv¬≤/r"}]},
                {t:"Basit Harmonik", tag:"AYT", c:[{h:"Sarka√ß",t:"2pi k√∂k(L/g)"}]},
                {t:"Modern Fizik", tag:"AYT", c:[{h:"Fotoelektrik",t:"I≈üƒ±ƒüƒ±n tanecik modelini kanƒ±tlar."}]}
            ],
            "Kimya": [
                {t:"Kimya Bilimi", tag:"TYT", c:[{h:"Simya",t:"Bilim deƒüildir, deneme yanƒ±lma."}]},
                {t:"Atom Modelleri", tag:"TYT", c:[{h:"Dalton",t:"Berk k√ºre."},{h:"Rutherford",t:"√áekirdekli model."}]},
                {t:"Periyodik Sistem", tag:"TYT", c:[{h:"Grup",t:"Dikey s√ºtun. Benzer kimyasal √∂zellik."}]},
                {t:"Kimyasal T√ºrler", tag:"TYT", c:[{h:"G√º√ßl√º Etkile≈üim",t:"ƒ∞yonik, Kovalent, Metalik."}]},
                {t:"Mol Kavramƒ±", tag:"TYT", c:[{h:"Avogadro",t:"6.02 x 10^23 tane."}]},
                {t:"Hesaplamalar", tag:"TYT", c:[{h:"Sƒ±nƒ±rlayƒ±cƒ±",t:"√ñnce biten madde tepkimeyi durdurur."}]},
                {t:"Karƒ±≈üƒ±mlar", tag:"TYT", c:[{h:"Homojen",t:"√á√∂zelti. Tek fazlƒ±."}]},
                {t:"Asit-Baz", tag:"TYT", c:[{h:"Asit",t:"H+ verir, tat ek≈üi."},{h:"Baz",t:"OH- verir, tat acƒ±."}]},
                {t:"Modern Atom", tag:"AYT", c:[{h:"Orbital",t:"s,p,d,f. Elektron bulutu."}]},
                {t:"Gazlar", tag:"AYT", c:[{h:"ƒ∞deal Gaz",t:"PV=nRT. Tanecikler arasƒ± etkile≈üim yok sayƒ±lƒ±r."}]},
                {t:"Sƒ±vƒ± √á√∂zeltiler", tag:"AYT", c:[{h:"Molarite",t:"M=n/V. Hacim litre alƒ±nƒ±r."}]},
                {t:"Enerji", tag:"AYT", c:[{h:"Entalpi",t:"ƒ∞zlenen yola baƒülƒ± deƒüildir."}]},
                {t:"Hƒ±z", tag:"AYT", c:[{h:"Etkin √áarpƒ±≈üma",t:"Uygun geometri ve enerji gerekir."}]},
                {t:"Denge", tag:"AYT", c:[{h:"Denge",t:"ƒ∞leri hƒ±z geri hƒ±za e≈üittir. Dinamiktir."}]},
                {t:"Elektrokimya", tag:"AYT", c:[{h:"Pil",t:"Kimyasal enerjiyi elektriƒüe √ßevirir. Anot a≈üƒ±nƒ±r."}]},
                {t:"Organik", tag:"AYT", c:[{h:"Karbon",t:"4 baƒü yapar."},{h:"Alkan",t:"Doymu≈ü hidrokarbon."}]}
            ],
            "Biyoloji": [
                {t:"Canlƒ±larƒ±n Ortak √ñz.", tag:"TYT", c:[{h:"Metabolizma",t:"Anabolizma + Katabolizma."}]},
                {t:"Temel Bile≈üenler", tag:"TYT", c:[{h:"Karbonhidrat",t:"1. derece enerji kaynaƒüƒ±."},{h:"Enzim",t:"Aktivasyon enerjisini d√º≈ü√ºr√ºr."}]},
                {t:"H√ºcre", tag:"TYT", c:[{h:"Prokaryot",t:"Zarlƒ± organel yok (Bakteri)."}]},
                {t:"Sƒ±nƒ±flandƒ±rma", tag:"TYT", c:[{h:"Sƒ±ralama",t:"T√ºr-Cins-Familya-Takƒ±m-Sƒ±nƒ±f-≈ûube-Alem."}]},
                {t:"B√∂l√ºnmeler", tag:"TYT", c:[{h:"Mitoz",t:"Kromozom sayƒ±sƒ± deƒüi≈ümez."},{h:"Mayoz",t:"Yarƒ±ya iner."}]},
                {t:"Kalƒ±tƒ±m", tag:"TYT", c:[{h:"Heterozigot",t:"Melez d√∂l (Aa)."}]},
                {t:"Ekoloji", tag:"TYT", c:[{h:"Biyotik",t:"Canlƒ± fakt√∂rler."}]},
                {t:"Sinir Sistemi", tag:"AYT", c:[{h:"Sinaps",t:"N√∂ronlar arasƒ± bo≈üluk."}]},
                {t:"Endokrin", tag:"AYT", c:[{h:"Hipofiz",t:"Diƒüer bezleri kontrol eder."}]},
                {t:"Duyu Organlarƒ±", tag:"AYT", c:[{h:"Kulak",t:"ƒ∞≈üitme ve denge organƒ±."}]},
                {t:"Destek Hareket", tag:"AYT", c:[{h:"Kƒ±kƒ±rdak",t:"Kan damarƒ± bulunmaz."}]},
                {t:"Sindirim", tag:"AYT", c:[{h:"Mide",t:"Protein sindirimi ba≈ülar."}]},
                {t:"Dola≈üƒ±m", tag:"AYT", c:[{h:"B√ºy√ºk Dola≈üƒ±m",t:"V√ºcuda temiz kan daƒüƒ±tƒ±lƒ±r."}]},
                {t:"Solunum", tag:"AYT", c:[{h:"Diyafram",t:"Memelilere √∂zg√º kas."}]},
                {t:"Protein Sentezi", tag:"AYT", c:[{h:"Kod",t:"DNA'daki 3'l√º ≈üifre."}]},
                {t:"Fotosentez", tag:"AYT", c:[{h:"Ama√ß",t:"I≈üƒ±k enerjisiyle besin √ºretmek."}]},
                {t:"Kemosentez", tag:"AYT", c:[{h:"Fark",t:"I≈üƒ±k gerekmez."}]},
                {t:"Bitki Biyolojisi", tag:"AYT", c:[{h:"Oksin",t:"B√ºy√ºme hormonu."}]}
            ],
            "Tarih": [
                {t:"Tarih Bilimi", tag:"TYT", c:[{h:"√ñzellik",t:"Deney ve g√∂zlem yapƒ±lamaz."}]},
                {t:"ƒ∞lk √áaƒü", tag:"TYT", c:[{h:"Hititler",t:"Panku≈ü meclisi, Anal yƒ±llƒ±klarƒ±."}]},
                {t:"ƒ∞slamiyet √ñncesi", tag:"TYT", c:[{h:"Orhun Abideleri",t:"ƒ∞lk yazƒ±lƒ± T√ºrk eserleri."}]},
                {t:"T√ºrk ƒ∞slam", tag:"TYT", c:[{h:"Karahanlƒ±lar",t:"ƒ∞lk T√ºrk ƒ∞slam devleti (Orta Asya)."}]},
                {t:"Osmanlƒ± Kurulu≈ü", tag:"TYT", c:[{h:"√áimpe Kalesi",t:"Rumeli'ye ilk ge√ßi≈ü."}]},
                {t:"Osmanlƒ± Y√ºkselme", tag:"TYT", c:[{h:"Kanuni",t:"En uzun s√ºre tahtta kalan padi≈üah."}]},
                {t:"Osmanlƒ± Duraklama", tag:"TYT", c:[{h:"Saray Kadƒ±nlarƒ±",t:"Y√∂netime karƒ±≈ümaya ba≈üladƒ±."}]},
                {t:"Gerileme", tag:"TYT", c:[{h:"Lale Devri",t:"Batƒ± √∂rnek alƒ±nmaya ba≈ülandƒ±."}]},
                {t:"Daƒüƒ±lma", tag:"TYT", c:[{h:"Tanzimat",t:"Hukukun √ºst√ºnl√ºƒü√º kabul edildi."}]},
                {t:"1. D√ºnya Sava≈üƒ±", tag:"TYT-AYT", c:[{h:"Sebep",t:"S√∂m√ºrgecilik ve Milliyet√ßilik."}]},
                {t:"Milli M√ºcadele", tag:"TYT-AYT", c:[{h:"Erzurum",t:"Vatan bir b√ºt√ºnd√ºr b√∂l√ºnemez."}]},
                {t:"ƒ∞nkƒ±laplar", tag:"TYT-AYT", c:[{h:"Halk√ßƒ±lƒ±k",t:"E≈üitlik, ayrƒ±calƒ±klarƒ±n kaldƒ±rƒ±lmasƒ±."}]},
                {t:"Dƒ±≈ü Politika", tag:"AYT", c:[{h:"Hatay",t:"1939'da anavatana katƒ±ldƒ±."}]}
            ],
            "Coƒürafya": [
                {t:"Doƒüa ve ƒ∞nsan", tag:"TYT", c:[{h:"Determinizm",t:"Doƒüa insanƒ± etkiler."}]},
                {t:"D√ºnya'nƒ±n ≈ûekli", tag:"TYT", c:[{h:"Sonu√ß",t:"Yer√ßekimi kutuplarda fazladƒ±r."}]},
                {t:"Hareketler", tag:"TYT", c:[{h:"Eksen Eƒüikliƒüi",t:"Mevsimler olu≈üur."}]},
                {t:"Harita", tag:"TYT", c:[{h:"Projeksiyon",t:"Hata oranƒ±nƒ± azaltmak i√ßin."}]},
                {t:"ƒ∞klim", tag:"TYT", c:[{h:"Nem",t:"Sƒ±caklƒ±k farkƒ±nƒ± azaltƒ±r."}]},
                {t:"N√ºfus", tag:"TYT", c:[{h:"Yoƒüun N√ºfus",t:"Sanayi ve tarƒ±m b√∂lgeleri."}]},
                {t:"ƒ∞√ß Kuvvetler", tag:"TYT", c:[{h:"Volkanizma",t:"Magmanƒ±n yery√ºz√ºne √ßƒ±kmasƒ±."}]},
                {t:"Dƒ±≈ü Kuvvetler", tag:"TYT", c:[{h:"Buzullar",t:"Kutuplarda etkilidir."}]},
                {t:"Topraklar", tag:"TYT", c:[{h:"Terra Rossa",t:"Akdeniz iklimi topraƒüƒ±."}]},
                {t:"T√ºrkiye", tag:"AYT", c:[{h:"Jeopolitik",t:"Kƒ±talar arasƒ± k√∂pr√º."}]},
                {t:"Ekonomi", tag:"AYT", c:[{h:"Ula≈üƒ±m",t:"Ticaretin geli≈ümesi i√ßin ≈üart."}]},
                {t:"B√∂lgeler", tag:"AYT", c:[{h:"GAP",t:"G√ºneydoƒüu Anadolu Projesi."}]}
            ],
            "Edebiyat": [
                {t:"ƒ∞slamiyet √ñncesi", tag:"AYT", c:[{h:"Ko≈üuk",t:"Doƒüa ve a≈ük ≈üiirleri."}]},
                {t:"Halk Edebiyatƒ±", tag:"AYT", c:[{h:"Mani",t:"7'li hece √∂l√ß√ºs√º, tek d√∂rtl√ºk."}]},
                {t:"Divan Edebiyatƒ±", tag:"AYT", c:[{h:"Mesnevi",t:"G√ºn√ºm√ºz romanƒ±nƒ±n yerini tutar."}]},
                {t:"Tanzimat 1", tag:"AYT", c:[{h:"Namƒ±k Kemal",t:"Vatan yahut Silistre (Sahnelenen ilk tiyatro)."}]},
                {t:"Tanzimat 2", tag:"AYT", c:[{h:"Recaizade",t:"Araba Sevdasƒ± (ƒ∞lk realist roman)."}]},
                {t:"Servet-i F√ºnun", tag:"AYT", c:[{h:"Tevfik Fikret",t:"Tablo altƒ± ≈üiir (Piton)."}]},
                {t:"Fecr-i Ati", tag:"AYT", c:[{h:"Ahmet Ha≈üim",t:"Sembolizm, ak≈üam ≈üairi."}]},
                {t:"Milli Edebiyat", tag:"AYT", c:[{h:"Ziya G√∂kalp",t:"T√ºrk√ß√ºl√ºk akƒ±mƒ±nƒ±n babasƒ±."}]},
                {t:"Cumhuriyet ≈ûiiri", tag:"AYT", c:[{h:"Nazƒ±m Hikmet",t:"Serbest nazƒ±m, toplumcu ger√ßek√ßi."}]},
                {t:"Cumhuriyet Roman", tag:"AYT", c:[{h:"Kemal Tahir",t:"Devlet Ana, Yorgun Sava≈ü√ßƒ±."}]},
                {t:"Akƒ±mlar", tag:"AYT", c:[{h:"Klasisizm",t:"Akƒ±l ve saƒüduyu."}]},
                {t:"S√∂z Sanatlarƒ±", tag:"AYT", c:[{h:"Te≈übih",t:"Benzetme."},{h:"ƒ∞ntak",t:"Konu≈üturma."}]}
            ]
        };

        const movies=[{t:"Interstellar",g:["bilim kurgu"],d:"ƒ∞nsanlƒ±ƒüƒ±n kurtulu≈üu i√ßin solucan deliƒüinden ge√ßen astronotlarƒ±n zamanla yarƒ±≈üƒ±."},{t:"Inception",g:["bilim kurgu","aksiyon"],d:"R√ºyalara girip fikir √ßalan bir hƒ±rsƒ±zƒ±n son g√∂revi."},{t:"The Dark Knight",g:["aksiyon","su√ß"],d:"Batman ve Joker'in kaotik sava≈üƒ±."},{t:"Fight Club",g:["dram"],d:"T√ºketim toplumuna isyan eden yeraltƒ± d√∂v√º≈ü kul√ºb√º."},{t:"Forrest Gump",g:["dram","romantik"],d:"D√º≈ü√ºk IQ'lu Forrest'ƒ±n inanƒ±lmaz hayat hikayesi."},{t:"The Matrix",g:["bilim kurgu"],d:"Ger√ßeƒüin bir sim√ºlasyon olduƒüunun ke≈üfi."},{t:"Parasite",g:["gerilim","dram"],d:"Fakir ailenin zengin aileye sƒ±zmasƒ±."},{t:"Avengers: Endgame",g:["aksiyon"],d:"Kahramanlarƒ±n Thanos'a kar≈üƒ± son sava≈üƒ±."},{t:"Joker",g:["dram","su√ß"],d:"Bir komedyenin su√ß prensine d√∂n√º≈ü√ºm√º."},{t:"The Hangover",g:["komedi"],d:"Las Vegas'ta kayƒ±p damadƒ± arayan arkada≈ülarƒ±n komik macerasƒ±."},{t:"Superbad",g:["komedi"],d:"Liseden mezun olan gen√ßlerin parti macerasƒ±."},{t:"3 Idiots",g:["komedi","dram"],d:"Eƒüitim sistemini ele≈ütiren √º√ß m√ºhendislik √∂ƒürencisi."},{t:"Deadpool",g:["komedi","aksiyon"],d:"S√ºper g√º√ßlere sahip geveze bir paralƒ± asker."},{t:"The Truman Show",g:["komedi","dram"],d:"Hayatƒ± bir TV ≈üovu olan adamƒ±n uyanƒ±≈üƒ±."},{t:"Titanic",g:["romantik"],d:"Batan gemide b√ºy√ºk a≈ük."},{t:"The Conjuring",g:["korku"],d:"Perili ev vakasƒ±."},{t:"It",g:["korku"],d:"Palya√ßo deh≈üeti."}];
        let watchList=JSON.parse(localStorage.getItem('myList'))||[];

        function openNotes(){document.getElementById('notesModal').style.display='flex';}
        function openGameMenu(){document.getElementById('gamesMenuModal').style.display='flex';}
        function openMovies(){toggleChat(true);}
        function closeModal(id){document.getElementById(id).style.display='none';}
        function toggleChat(f){const c=document.getElementById('cineBot'); if(f)c.style.display='flex'; else c.style.display=c.style.display==='flex'?'none':'flex'; renderList();}
        function switchTab(t){const tabs=document.querySelectorAll('.chat-tab'); tabs.forEach(x=>x.classList.remove('active')); if(t==='chat'){document.querySelector('.chat-tab:nth-child(1)').classList.add('active'); document.getElementById('chatView').style.display='flex'; document.getElementById('chatInputArea').style.display='flex'; document.getElementById('listView').style.display='none';} else{document.querySelector('.chat-tab:nth-child(2)').classList.add('active'); document.getElementById('chatView').style.display='none'; document.getElementById('chatInputArea').style.display='none'; document.getElementById('listView').style.display='block'; renderList();}}
        function loadSubject(s){const c=document.getElementById('topicContainer'); c.innerHTML=curriculum[s].map(t=>`<div class="topic-group"><div class="topic-head">${t.t}<span class="tag ${t.tag.includes('T')?'tyt':'ayt'}">${t.tag}</span></div><div class="flashcards">${t.c.map(x=>`<div class="card"><h5>${x.h}</h5><p>${x.t}</p></div>`).join('')}</div></div>`).join('');}
        function sendMessage(){const i=document.getElementById('chatInput'); const v=i.value.trim().toLowerCase(); if(!v)return; addMsg(v,'user'); i.value=''; setTimeout(()=>{const m=movies.filter(x=>x.g.some(g=>v.includes(g))); if(m.length){const r=m[Math.floor(Math.random()*m.length)]; addMsg(`√ñneri: <b>${r.t}</b><br>${r.d}<div class="movie-card-chat"><button class="btn-sm btn-watch" onclick="window.open('https://www.fullhdfilmizlesene.tv/arama/${encodeURIComponent(r.t)}','_blank')"><i class="fa-solid fa-play"></i> Sitede ƒ∞zle</button><button class="btn-sm btn-add" onclick="addList('${r.t}','${r.g[0]}')">Listeme Ekle</button></div>`,'bot');} else addMsg("Bulunamadƒ±.",'bot');},500);}
        function addMsg(t,c){const d=document.createElement('div');d.className=`msg ${c}`;d.innerHTML=t;document.getElementById('chatView').append(d);}
        function handleEnter(e){if(e.key==='Enter')sendMessage();}
        function addList(t,g){if(!watchList.some(x=>x.t==t)){watchList.push({t,g});localStorage.setItem('myList',JSON.stringify(watchList));alert("Eklendi");}else alert("Zaten var");}
        function renderList(){const d=document.getElementById('listView'); if(!watchList.length)d.innerHTML='<p style="text-align:center;color:#999;margin-top:20px;">Bo≈ü.</p>'; else d.innerHTML=watchList.map((m,i)=>`<div class="w-item"><div><span>${m.t}</span><br><small>${m.g}</small></div><i class="fa-solid fa-trash w-remove" onclick="rmList(${i})"></i></div>`).join('');}
        function rmList(i){watchList.splice(i,1);localStorage.setItem('myList',JSON.stringify(watchList));renderList();}

        const cvs=document.getElementById('gameCanvas'), ctx=cvs.getContext('2d');
        const ncvs=document.getElementById('nextCanvas'), nctx=ncvs.getContext('2d');
        let gameInt, activeG, sc=0, lvl=1, lvs=3, snake, food, sDir, tBoard, tPiece, ntPiece, pacman, ghosts, map, dots;

        function initGame(g){document.getElementById('gamesMenuModal').style.display='none';document.getElementById('gameModal').style.display='flex';activeG=g;restart();}
        function stopGame(){clearInterval(gameInt);document.getElementById('gameModal').style.display='none';}
        function restart(){document.getElementById('gameOverOverlay').style.display='none';sc=0;lvl=1;lvs=3;updUI();clearInterval(gameInt); document.getElementById('nextPieceContainer').style.display='none';document.getElementById('livesContainer').style.display='none'; if(activeG==='snake'){cvs.width=400;cvs.height=400;sSnake();} else if(activeG==='tetris'){cvs.width=240;cvs.height=400;document.getElementById('nextPieceContainer').style.display='block';sTetris();} else if(activeG==='pacman'){cvs.width=448;cvs.height=496;document.getElementById('livesContainer').style.display='block';sPacman();}}
        function updUI(){document.getElementById('scoreVal').innerText=sc;document.getElementById('levelVal').innerText=lvl;document.getElementById('livesVal').innerText="‚ù§Ô∏è".repeat(lvs);}
        function gameOver(){clearInterval(gameInt);document.getElementById('finalScore').innerText=sc;document.getElementById('gameOverOverlay').style.display='flex';}

        function sSnake(){
            const box=20; snake=[{x:10,y:10}]; food={x:15,y:15}; sDir={x:1,y:0};
            function upd(){ctx.fillStyle="#111"; ctx.fillRect(0,0,400,400); for(let i=0;i<=400;i+=20){ctx.strokeStyle="#222";ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,400);ctx.stroke();ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(400,i);ctx.stroke();} let h={x:snake[0].x+sDir.x, y:snake[0].y+sDir.y}; if(h.x<0||h.x>=20||h.y<0||h.y>=20||snake.some(s=>s.x==h.x&&s.y==h.y)){gameOver();return;} snake.unshift(h); if(h.x==food.x&&h.y==food.y){sc+=10;food={x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*20)};updUI();}else snake.pop(); ctx.fillStyle="red";ctx.beginPath();ctx.arc(food.x*20+10,food.y*20+10,8,0,7);ctx.fill(); snake.forEach((s,i)=>{ctx.fillStyle=i==0?"#00cec9":"#0984e3";ctx.fillRect(s.x*20+1,s.y*20+1,18,18);});}
            document.onkeydown=e=>{if(activeG==='snake'){if(e.key=="ArrowUp"&&sDir.y==0)sDir={x:0,y:-1};if(e.key=="ArrowDown"&&sDir.y==0)sDir={x:0,y:1};if(e.key=="ArrowLeft"&&sDir.x==0)sDir={x:-1,y:0};if(e.key=="ArrowRight"&&sDir.x==0)sDir={x:1,y:0};}}
            gameInt=setInterval(upd,150);
        }
        function sTetris(){
            const R=20,C=12,S=20,P=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]]], Clr=["cyan","yellow","purple","green","red","blue","orange"]; tBoard=Array(R).fill().map(()=>Array(C).fill(0));
            function nP(){let r=Math.floor(Math.random()*P.length);return{s:P[r],c:Clr[r],x:4,y:0};} tPiece=nP(); ntPiece=nP(); dN();
            function dN(){nctx.fillStyle="#222";nctx.fillRect(0,0,80,80);ntPiece.s.forEach((r,y)=>r.forEach((v,x)=>{if(v){nctx.fillStyle=ntPiece.c;nctx.fillRect((x+1)*15,(y+1)*15,15,15)}}));}
            function draw(){ctx.fillStyle="black";ctx.fillRect(0,0,240,400);tBoard.forEach((r,y)=>r.forEach((c,x)=>{if(c){ctx.fillStyle=c;ctx.fillRect(x*S,y*S,S,S);ctx.strokeRect(x*S,y*S,S,S)}}));tPiece.s.forEach((r,y)=>r.forEach((v,x)=>{if(v){ctx.fillStyle=tPiece.c;ctx.fillRect((tPiece.x+x)*S,(tPiece.y+y)*S,S,S)}}));}
            function coll(x,y,s){return s.some((r,dy)=>r.some((v,dx)=>v&&(tPiece.y+y+dy>=R||tPiece.x+x+dx<0||tPiece.x+x+dx>=C||tBoard[tPiece.y+y+dy]?.[tPiece.x+x+dx])));}
            function move(){if(!coll(0,1,tPiece.s))tPiece.y++;else{tPiece.s.forEach((r,y)=>r.forEach((v,x)=>{if(v){if(tPiece.y+y<0){gameOver();return;}tBoard[tPiece.y+y][tPiece.x+x]=tPiece.c;}}));for(let r=0;r<R;r++)if(tBoard[r].every(c=>c)){tBoard.splice(r,1);tBoard.unshift(Array(C).fill(0));sc+=100;updUI();}tPiece=ntPiece;ntPiece=nP();dN();}draw();}
            document.onkeydown=e=>{if(activeG==='tetris'){if(e.key=="ArrowLeft"&&!coll(-1,0,tPiece.s))tPiece.x--;if(e.key=="ArrowRight"&&!coll(1,0,tPiece.s))tPiece.x++;if(e.key=="ArrowDown")move();if(e.key=="ArrowUp"){let r=tPiece.s[0].map((_,i)=>tPiece.s.map(row=>row[i]).reverse());if(!coll(0,0,r))tPiece.s=r;}}}
            gameInt=setInterval(move,500);
        }
        function sPacman(){
            const T=32; const BM=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,3,1],[1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,1,0,1,0,1,1,2,1,1,0,1,0,1,1,0,1],[1,0,0,0,0,1,0,2,2,2,2,2,0,1,0,0,0,0,1],[1,1,1,1,0,1,1,1,2,2,2,1,1,1,0,1,1,1,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],[1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],[1,3,0,1,0,0,0,0,0,9,0,0,0,0,0,1,0,3,1],[1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1],[1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];
            function load(){map=JSON.parse(JSON.stringify(BM));pacman={x:9,y:9,dX:0,dY:0,nX:0,nY:0,a:0,m:0.2,md:1};ghosts=[{x:9,y:5,c:'red',s:'n'},{x:8,y:5,c:'pink',s:'n'}];dots=0;for(let r=0;r<13;r++)for(let c=0;c<19;c++)if(map[r][c]==0||map[r][c]==3)dots++;}
            load(); let fr=0;
            function upd(){fr++; if(map[pacman.y+pacman.nY][pacman.x+pacman.nX]!=1){pacman.dX=pacman.nX;pacman.dY=pacman.nY;} if(map[pacman.y+pacman.dY][pacman.x+pacman.dX]!=1){pacman.x+=pacman.dX;pacman.y+=pacman.dY;pacman.m+=0.1*pacman.md;if(pacman.m>0.4||pacman.m<0.05)pacman.md*=-1;if(pacman.dX==1)pacman.a=0;if(pacman.dX==-1)pacman.a=Math.PI;if(pacman.dY==-1)pacman.a=-Math.PI/2;if(pacman.dY==1)pacman.a=Math.PI/2;} let t=map[pacman.y][pacman.x]; if(t==0){map[pacman.y][pacman.x]=2;sc+=10;dots--;}else if(t==3){map[pacman.y][pacman.x]=2;sc+=50;dots--;ghosts.forEach(g=>g.s='s');setTimeout(()=>ghosts.forEach(g=>g.s='n'),5000);} if(dots<=0){lvl++;load();} ghosts.forEach(g=>{if(Math.random()<0.5){let ds=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}].filter(d=>map[g.y+d.y][g.x+d.x]!=1);if(ds.length){let m=ds[Math.floor(Math.random()*ds.length)];g.x+=m.x;g.y+=m.y;}}if(g.x==pacman.x&&g.y==pacman.y){if(g.s=='s'){sc+=200;g.x=9;g.y=5;g.s='n';}else{lvs--;if(lvs<=0)gameOver();else{pacman.x=9;pacman.y=9;pacman.dX=0;}}}}) updUI(); draw();}
            function draw(){ctx.fillStyle="black";ctx.fillRect(0,0,608,416); for(let r=0;r<13;r++)for(let c=0;c<19;c++){if(map[r][c]==1){ctx.strokeStyle="#0984e3";ctx.strokeRect(c*T+4,r*T+4,24,24);}else if(map[r][c]==0){ctx.fillStyle="#fab1a0";ctx.beginPath();ctx.arc(c*T+16,r*T+16,4,0,7);ctx.fill();}else if(map[r][c]==3){ctx.fillStyle="white";ctx.beginPath();ctx.arc(c*T+16,r*T+16,(fr%4==0?9:6),0,7);ctx.fill();}} let px=pacman.x*T+16,py=pacman.y*T+16; ctx.save();ctx.translate(px,py);ctx.rotate(pacman.a);ctx.beginPath();ctx.arc(0,0,13,pacman.m*Math.PI,(2-pacman.m)*Math.PI);ctx.lineTo(0,0);ctx.fillStyle="yellow";ctx.fill();ctx.restore(); ghosts.forEach(g=>{let gx=g.x*T+16,gy=g.y*T+16;ctx.fillStyle=g.s=='s'?'blue':g.c;ctx.beginPath();ctx.arc(gx,gy-4,13,Math.PI,0);ctx.lineTo(gx+13,gy+13);ctx.lineTo(gx-13,gy+13);ctx.fill();});}
            document.onkeydown=e=>{if(activeG==='pacman'){if(e.key=="ArrowUp")pacman.nY=-1;if(e.key=="ArrowDown")pacman.nY=1;if(e.key=="ArrowLeft")pacman.nX=-1;if(e.key=="ArrowRight")pacman.nX=1;if(e.key=="ArrowUp"||e.key=="ArrowDown")pacman.nX=0;else pacman.nY=0;}}
            gameInt=setInterval(upd,150);
        }
    </script>
</body>
</html>
