<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aleyna Korkmaz | YKS Notları & Oyunlar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #00cec9;
            --accent: #fd79a8;
            --dark: #2d3436;
            --light: #dfe6e9;
            --card-bg: #ffffff;
            --text-color: #2d3436;
            --success: #00b894;
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0; padding: 0;
            background-color: #f8f9fa;
            color: var(--text-color);
            overflow-x: hidden;
        }

        /* --- NAVİGASYON --- */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 3rem;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            position: sticky; top: 0; z-index: 1000;
        }

        .logo {
            font-size: 1.4rem; font-weight: 800;
            color: var(--primary); letter-spacing: -0.5px;
            cursor: pointer;
        }

        .nav-links { display: flex; gap: 40px; }
        .nav-item { 
            position: relative; cursor: pointer; padding: 10px 0; 
            font-weight: 600; color: var(--dark); font-size: 0.95rem;
            transition: 0.3s;
        }
        .nav-item::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 3px;
            background: var(--primary); transition: 0.3s; border-radius: 2px;
        }
        .nav-item:hover::after { width: 100%; }
        .nav-item:hover { color: var(--primary); }

        .dropdown {
            display: none; position: absolute; top: 100%; left: -20px;
            background: white; border-radius: 10px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            min-width: 220px; overflow: hidden; animation: slideUp 0.3s ease;
            border: 1px solid #eee;
        }
        .nav-item:hover .dropdown { display: block; }
        .dropdown div { 
            padding: 15px 20px; transition: 0.2s; border-bottom: 1px solid #f9f9f9; display: flex; align-items: center; gap: 10px;
        }
        .dropdown div:hover { background: #f0f3ff; color: var(--primary); }

        /* --- HERO (GİRİŞ) --- */
        header.hero {
            position: relative;
            text-align: center; padding: 100px 20px;
            background: radial-gradient(circle at 10% 20%, rgb(111, 111, 219) 0%, rgb(182, 109, 246) 90%);
            color: white; border-radius: 0 0 50px 50px;
            box-shadow: 0 20px 40px rgba(108, 92, 231, 0.3);
            overflow: hidden;
        }
        
        .hero h1 { font-size: 3.5rem; margin-bottom: 10px; font-weight: 800; }
        .typing-wrapper {
            background: rgba(255,255,255,0.2); padding: 8px 20px;
            border-radius: 30px; display: inline-block; font-weight: 600;
            backdrop-filter: blur(5px);
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }

        /* --- HOME GRID (ANA SAYFA İÇERİĞİ) --- */
        .home-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: -50px; position: relative; z-index: 2; }
        .info-box {
            background: white; padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08); text-align: center;
            transition: 0.3s; border: 1px solid rgba(0,0,0,0.05);
        }
        .info-box:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.12); }
        .info-icon {
            width: 70px; height: 70px; background: #f0f3ff; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 20px auto; font-size: 1.8rem; color: var(--primary);
        }

        /* --- DERS NOTLARI STİLİ --- */
        .subject-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; 
            margin-top: 20px;
        }
        .subject-card {
            background: white; border-radius: 16px; overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); cursor: pointer;
            transition: 0.4s; border: 1px solid #eee; position: relative;
        }
        .subject-card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); border-color: var(--primary); }
        .card-top { height: 120px; display: flex; align-items: center; justify-content: center; font-size: 3.5rem; color: white; }
        
        .mat-grad { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #555; }
        .fiz-grad { background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%); color: #444; }
        .kim-grad { background: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%); color: #444; }
        .bio-grad { background: linear-gradient(120deg, #d4fc79 0%, #96e6a1 100%); color: #444; }
        .edb-grad { background: linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%); color: #555; }
        .tar-grad { background: linear-gradient(120deg, #fccb90 0%, #d57eeb 100%); color: white; }
        .cog-grad { background: linear-gradient(120deg, #89f7fe 0%, #66a6ff 100%); color: white; }

        .card-content { padding: 20px; text-align: center; }
        .card-content h3 { margin: 0; font-size: 1.4rem; color: var(--dark); }
        .card-content span { font-size: 0.85rem; color: #888; display: block; margin-top: 5px; }

        /* MODAL STYLES (NOTLAR & OYUNLAR) */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);
            z-index: 2000; justify-content: center; align-items: center;
            animation: fadeIn 0.3s ease;
        }
        .modal-content {
            background: #f8f9fa; width: 95%; max-width: 1100px; max-height: 90vh;
            border-radius: 20px; overflow-y: auto; position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }
        .modal-header {
            padding: 25px; background: white; border-bottom: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10;
        }
        .close-btn { font-size: 2rem; cursor: pointer; color: #777; transition: 0.2s; }
        .close-btn:hover { color: var(--accent); transform: rotate(90deg); }

        /* Konu Kartları */
        .topic-section { padding: 30px; }
        .topic-group { margin-bottom: 40px; }
        .topic-title { 
            font-size: 1.5rem; color: var(--dark); border-left: 5px solid var(--primary);
            padding-left: 15px; margin-bottom: 20px; font-weight: 700; display: flex; align-items: center; gap: 10px;
        }
        .tag { font-size: 0.8rem; padding: 4px 10px; border-radius: 5px; color: white; vertical-align: middle; }
        .tyt { background: #00b894; } .ayt { background: #fd79a8; }

        .cards-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .flash-card {
            background: white; border-radius: 12px; padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03); border: 1px solid #f0f0f0;
            transition: 0.3s; position: relative; overflow: hidden;
        }
        .flash-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 5px; height: 100%; background: var(--secondary);
        }
        .flash-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .flash-card h4 { margin: 0 0 10px 0; color: #2d3436; font-size: 1.05rem; }
        .flash-card p { font-size: 0.9rem; color: #636e72; line-height: 1.6; margin: 0; }

        /* OYUN ÖZEL STİLLERİ */
        #game-modal-content {
            background: #111; color: white; display: flex; flex-direction: column; align-items: center; padding: 0;
            overflow: hidden; height: auto; width: auto; max-width: none; border-radius: 10px;
        }
        canvas { 
            background: #000; border: 5px solid #333; border-radius: 5px; 
            box-shadow: 0 0 50px rgba(0,206,201,0.2); margin: 20px;
        }
        .game-ui-bar {
            display: flex; gap: 40px; padding: 15px 40px; background: #222;
            border-radius: 50px; border: 1px solid #444; margin-bottom: 20px;
        }
        .g-stat { font-family: 'Courier New', monospace; font-size: 1.5rem; font-weight: bold; }
        .g-stat span { color: var(--secondary); }

        .game-overlay {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); z-index: 100; flex-direction: column; justify-content: center; align-items: center;
        }
        .btn-neon {
            background: transparent; color: var(--secondary); border: 2px solid var(--secondary);
            padding: 15px 40px; font-size: 1.2rem; font-weight: bold; cursor: pointer;
            margin: 10px; text-transform: uppercase; letter-spacing: 2px;
            box-shadow: 0 0 10px var(--secondary); text-shadow: 0 0 10px var(--secondary);
            transition: 0.3s;
        }
        .btn-neon:hover { background: var(--secondary); color: black; box-shadow: 0 0 30px var(--secondary); }

        footer { text-align: center; padding: 40px; background: white; margin-top: 60px; color: #888; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <nav>
        <div class="logo" onclick="showSection('home')"><i class="fa-solid fa-graduation-cap"></i> Aleyna Korkmaz</div>
        <div class="nav-links">
            <div class="nav-item" onclick="showSection('home')">ANA SAYFA</div>
            <div class="nav-item" onclick="showSection('notes')">DERS NOTLARI</div>
            <div class="nav-item">
                OYUNLAR <i class="fa-solid fa-caret-down"></i>
                <div class="dropdown">
                    <div onclick="initGame('pacman')"><i class="fa-solid fa-ghost"></i> Neon Pacman</div>
                    <div onclick="initGame('tetris')"><i class="fa-solid fa-shapes"></i> Tetris</div>
                    <div onclick="initGame('snake')"><i class="fa-solid fa-staff-snake"></i> Yılan</div>
                </div>
            </div>
        </div>
    </nav>

    <main id="main-content">
        </main>

    <div id="topicModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle" style="margin:0; color:var(--primary);">Matematik</h2>
                <span class="close-btn" onclick="closeTopicModal()">&times;</span>
            </div>
            <div id="topicContainer" class="topic-section"></div>
        </div>
    </div>

    <div id="gameModal" class="modal" style="background: black;">
        <div id="game-modal-content">
            <div style="width:100%; text-align:right; padding:10px;">
                <span onclick="stopGame()" style="color:#fff; cursor:pointer; font-size:24px; border:1px solid #fff; padding:5px 15px; border-radius:20px;">KAPAT</span>
            </div>
            
            <div style="position: relative;">
                <div id="gameOverOverlay" class="game-overlay">
                    <h1 style="color:var(--accent); font-size:4rem; margin:0; text-shadow:0 0 20px red;">OYUN BİTTİ</h1>
                    <p style="color:white; font-size:1.5rem; margin-bottom:30px;">SKOR: <span id="finalScore">0</span></p>
                    <button class="btn-neon" onclick="restartActiveGame()">TEKRAR OYNA</button>
                    <button class="btn-neon" style="border-color:white; color:white; box-shadow:none; text-shadow:none;" onclick="stopGame()">ÇIKIŞ</button>
                </div>
                <canvas id="gameCanvas"></canvas>
            </div>

            <div class="game-ui-bar">
                <div class="g-stat">SKOR: <span id="scoreVal">0</span></div>
                <div class="g-stat">SEVİYE: <span id="levelVal">1</span></div>
                <div class="g-stat" id="livesContainer">CAN: <span id="livesVal" style="color:#ff7675">3</span></div>
            </div>
            <div style="color:#666; font-size:0.8rem; margin-top:10px;">Yön tuşları ile kontrol edin</div>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 Aleyna Korkmaz | Matematik & Veri Analizi</p>
    </footer>

    <script>
        // --- YKS (TYT/AYT) MÜFREDAT VERİTABANI ---
        const curriculum = {
            "Matematik": {
                style: "mat-grad", icon: "fa-calculator",
                topics: [
                    {
                        title: "Temel Kavramlar & Sayılar", tag: "TYT",
                        cards: [
                            { h: "Tek & Çift Sayılar", t: "T ± T = Ç, T ± Ç = T, Ç ± Ç = Ç. Çarpımda bir tane Ç varsa sonuç Çift'tir." },
                            { h: "Asal Sayılar", t: "Sadece 1'e ve kendisine bölünen 1'den büyük sayılar. (2, 3, 5, 7, 11...)" },
                            { h: "Faktöriyel (!)", t: "n! = n.(n-1)...3.2.1. (0! = 1 dir)." }
                        ]
                    },
                    {
                        title: "Fonksiyonlar", tag: "TYT-AYT",
                        cards: [
                            { h: "Birebir Fonksiyon", t: "Her tanım elemanı farklı bir değere gider." },
                            { h: "Ters Fonksiyon", t: "f(x)=y ise f⁻¹(y)=x. Grafiği y=x doğrusuna göre simetriktir." },
                            { h: "Parabol (AYT)", t: "f(x)=ax²+bx+c. Tepe noktası T(r,k). r=-b/2a." }
                        ]
                    },
                    {
                        title: "Limit & Türev & İntegral", tag: "AYT",
                        cards: [
                            { h: "Türev Anlamı", t: "Bir eğrinin bir noktadaki teğetinin eğimidir." },
                            { h: "Ekstremum Noktalar", t: "Türevin işaret değiştirdiği (0 olduğu) yerel max/min noktaları." },
                            { h: "Belirli İntegral", t: "Bir eğrinin altında kalan alanı hesaplamaya yarar." }
                        ]
                    }
                ]
            },
            "Fizik": {
                style: "fiz-grad", icon: "fa-atom",
                topics: [
                    {
                        title: "Kuvvet ve Hareket", tag: "TYT-AYT",
                        cards: [
                            { h: "Newton 2. Yasa", t: "F_net = m . a (Kuvvet = Kütle x İvme)" },
                            { h: "İş ve Enerji", t: "W = F.x ve Mekanik Enerji Korunumu (Sürtünmesiz ortam)." },
                            { h: "Atışlar (AYT)", t: "Serbest düşme h=5t², Yatay atışta yatay hız sabittir." }
                        ]
                    },
                    {
                        title: "Optik & Dalgalar", tag: "TYT",
                        cards: [
                            { h: "Yansıma", t: "Gelme açısı yansıma açısına eşittir." },
                            { h: "Renkler", t: "Ana renkler: Kırmızı, Yeşil, Mavi. Işıkta beyazı oluşturur." },
                            { h: "Ses Dalgaları", t: "Boyuna dalgalardır, boşlukta yayılmazlar." }
                        ]
                    }
                ]
            },
            "Kimya": {
                style: "kim-grad", icon: "fa-flask",
                topics: [
                    {
                        title: "Atom ve Periyodik Sistem", tag: "TYT",
                        cards: [
                            { h: "İzotop", t: "Proton sayısı aynı, nötron sayısı farklı atomlar." },
                            { h: "Elektronegatiflik", t: "Bağ elektronlarını çekme gücü. Periyodik tabloda sağa ve yukarı artar." }
                        ]
                    },
                    {
                        title: "Gazlar & Çözeltiler", tag: "AYT",
                        cards: [
                            { h: "İdeal Gaz", t: "P.V = n.R.T formülü." },
                            { h: "Koligatif Özellikler", t: "Tuz eklendikçe kaynama noktası artar, donma noktası düşer." }
                        ]
                    },
                    {
                        title: "Organik Kimya", tag: "AYT",
                        cards: [
                            { h: "Alkanlar", t: "CnH2n+2. Doymuş hidrokarbonlar." },
                            { h: "Aromatikler", t: "Benzen halkası içeren bileşikler (Rezonans yapı)." }
                        ]
                    }
                ]
            },
            "Biyoloji": {
                style: "bio-grad", icon: "fa-dna",
                topics: [
                    {
                        title: "Hücre ve Organeller", tag: "TYT",
                        cards: [
                            { h: "Mitokondri", t: "Oksijenli solunum ile ATP üretir." },
                            { h: "Ribozom", t: "Tüm canlılarda bulunur, protein sentezler." }
                        ]
                    },
                    {
                        title: "Sistemler", tag: "AYT",
                        cards: [
                            { h: "Sinir Sistemi", t: "Nöron, Sinaps, Merkezi ve Çevresel Sinir Sistemi." },
                            { h: "Dolaşım", t: "Kalp 4 odacıklıdır. Küçük ve büyük kan dolaşımı." }
                        ]
                    }
                ]
            },
            "Tarih": {
                style: "tar-grad", icon: "fa-landmark",
                topics: [
                    {
                        title: "İlk Türk Devletleri", tag: "TYT",
                        cards: [
                            { h: "Kurultay", t: "Devlet işlerinin görüşüldüğü meclis." },
                            { h: "İkili Teşkilat", t: "Ülkenin Doğu-Batı olarak yönetilmesi." }
                        ]
                    },
                    {
                        title: "İnkılap Tarihi", tag: "TYT-AYT",
                        cards: [
                            { h: "Amasya Genelgesi", t: "Kurtuluş Savaşı'nın amacı, gerekçesi ve yöntemi belirlendi." },
                            { h: "Sakarya Savaşı", t: "Mustafa Kemal'e Gazilik ve Mareşallik verildi (1683'ten beri ilk durdurma)." }
                        ]
                    }
                ]
            },
            "Coğrafya": {
                style: "cog-grad", icon: "fa-globe",
                topics: [
                    {
                        title: "Doğa ve İnsan", tag: "TYT",
                        cards: [
                            { h: "İzohips", t: "Eş yükselti eğrileri. Sıklaştığı yerde eğim fazladır." },
                            { h: "Meridyenler", t: "Yerel saat hesaplamada kullanılır." }
                        ]
                    }
                ]
            },
            "Edebiyat": {
                style: "edb-grad", icon: "fa-feather",
                topics: [
                    {
                        title: "Şiir Bilgisi", tag: "AYT",
                        cards: [
                            { h: "Redif & Kafiye", t: "Redif görevce aynı ekler, kafiye ses benzerliğidir." },
                            { h: "Hece Ölçüsü", t: "Milli ölçümüzdür. Parmak hesabı da denir." }
                        ]
                    },
                    {
                        title: "Dönemler", tag: "AYT",
                        cards: [
                            { h: "Tanzimat 1. Dönem", t: "Sanat toplum içindir. Şinasi, Namık Kemal." },
                            { h: "Servet-i Fünun", t: "Ağır dil, karamsarlık. Tevfik Fikret, Halit Ziya." }
                        ]
                    }
                ]
            }
        };

        // --- SAYFA YÖNETİMİ ---
        const mainContent = document.getElementById('main-content');

        function showSection(section) {
            mainContent.style.opacity = '0';
            setTimeout(() => {
                if(section === 'home') {
                    mainContent.innerHTML = `
                        <header class="hero">
                            <h1>Merhaba, Ben Aleyna!</h1>
                            <p>Matematik Öğrencisi & Veri Tutkunu</p>
                            <div class="typing-wrapper">
                                <span id="typing"></span>
                            </div>
                        </header>
                        <div class="container">
                            <div class="home-grid">
                                <div class="info-box">
                                    <div class="info-icon"><i class="fa-solid fa-graduation-cap"></i></div>
                                    <h3>Eğitim</h3>
                                    <p>İstanbul Üniversitesi Matematik Bölümü öğrencisiyim. Analitik düşünme ve problem çözme odaklıyım.</p>
                                </div>
                                <div class="info-box">
                                    <div class="info-icon"><i class="fa-solid fa-code"></i></div>
                                    <h3>Yazılım</h3>
                                    <p>Python, SQL ve Veri Analizi araçlarını kullanarak veriden anlamlı sonuçlar çıkarmayı seviyorum.</p>
                                </div>
                                <div class="info-box">
                                    <div class="info-icon"><i class="fa-solid fa-gamepad"></i></div>
                                    <h3>Geliştirme</h3>
                                    <p>Burada hem YKS öğrencileri için notlar hazırlıyor hem de hobi olarak web tabanlı oyunlar geliştiriyorum.</p>
                                </div>
                            </div>
                        </div>
                    `;
                    startTyping();
                } 
                else if(section === 'notes') {
                    mainContent.innerHTML = `
                        <div class="container">
                            <h2 style="text-align:center; font-size:2.5rem; margin-bottom:40px; color:var(--dark);">Ders Notları Kütüphanesi</h2>
                            <div class="subject-grid">
                                ${Object.keys(curriculum).map(key => `
                                    <div class="subject-card" onclick="openSubject('${key}')">
                                        <div class="card-top ${curriculum[key].style}">
                                            <i class="fa-solid ${curriculum[key].icon}"></i>
                                        </div>
                                        <div class="card-content">
                                            <h3>${key}</h3>
                                            <span>${curriculum[key].topics.length} Ana Konu Başlığı</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
                else if(section === 'movies') {
                    mainContent.innerHTML = `<div class="container" style="text-align:center; padding:100px;"><i class="fa-solid fa-film" style="font-size:3rem; color:#ccc;"></i><h3>Film Listesi Yakında...</h3></div>`;
                }
                mainContent.style.opacity = '1';
                mainContent.style.transition = 'opacity 0.4s';
            }, 200);
        }

        // Typing Effect
        function startTyping() {
            const texts = ["Veri Analisti Adayı", "Matematik Tutkunu", "Yazılımcı"];
            let count = 0, index = 0, currentText = "", letter = "";
            const typeElem = document.getElementById('typing');
            if(!typeElem) return;
            
            function type() {
                if(count === texts.length) count = 0;
                currentText = texts[count];
                letter = currentText.slice(0, ++index);
                if(document.getElementById('typing')) {
                    document.getElementById('typing').textContent = letter;
                    if(letter.length === currentText.length) {
                        count++; index = 0; setTimeout(type, 2000);
                    } else { setTimeout(type, 100); }
                }
            }
            type();
        }

        // --- MODAL FONKSİYONLARI ---
        function openSubject(key) {
            const data = curriculum[key];
            const modal = document.getElementById('topicModal');
            document.getElementById('modalTitle').innerText = key + " Notları";
            const container = document.getElementById('topicContainer');
            
            container.innerHTML = data.topics.map(topic => `
                <div class="topic-group">
                    <div class="topic-title">
                        ${topic.title} 
                        <span class="tag ${topic.tag.includes('TYT') ? 'tyt' : 'ayt'}">${topic.tag}</span>
                    </div>
                    <div class="cards-container">
                        ${topic.cards.map(card => `
                            <div class="flash-card">
                                <h4>${card.h}</h4>
                                <p>${card.t}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            modal.style.display = 'flex';
        }

        function closeTopicModal() { document.getElementById('topicModal').style.display = 'none'; }
        
        // Başlangıç
        showSection('home');

        /* ==================== OYUN MOTORLARI (V1.9.0) ==================== */
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const overlay = document.getElementById('gameOverOverlay');
        let gameInterval, activeGame = null;
        let score=0, level=1, lives=3, animationFrame=0;

        // Oyun Objeleri
        let pacman, ghosts, map, totalDots, snake, food, snakeDir, tetrisBoard, tetrisPiece;

        function initGame(game) {
            document.getElementById('gameModal').style.display = 'flex';
            activeGame = game;
            restartActiveGame();
        }

        function stopGame() {
            clearInterval(gameInterval);
            document.getElementById('gameModal').style.display = 'none';
        }

        function restartActiveGame() {
            overlay.style.display = 'none';
            score = 0; level = 1; lives = 3; updateUI();
            clearInterval(gameInterval);

            if(activeGame === 'pacman') {
                canvas.width = 608; canvas.height = 416;
                document.getElementById('livesContainer').style.display = 'block';
                startPacman();
            } else if(activeGame === 'tetris') {
                canvas.width = 240; canvas.height = 400;
                document.getElementById('livesContainer').style.display = 'none';
                startTetris();
            } else if(activeGame === 'snake') {
                canvas.width = 500; canvas.height = 500;
                document.getElementById('livesContainer').style.display = 'none';
                startSnake();
            }
        }

        function updateUI() {
            document.getElementById('scoreVal').innerText = score;
            document.getElementById('levelVal').innerText = level;
            document.getElementById('livesVal').innerText = "❤️".repeat(lives);
        }

        function triggerGameOver(win) {
            clearInterval(gameInterval);
            document.getElementById('finalScore').innerText = score;
            overlay.style.display = 'flex';
        }

        // --- PACMAN (NEON EDITION) ---
        function startPacman() {
            const TILE = 32;
            const baseMap = [
                [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                [1,3,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,3,1],
                [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
                [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                [1,0,1,1,0,1,0,1,1,2,1,1,0,1,0,1,1,0,1],
                [1,0,0,0,0,1,0,2,2,2,2,2,0,1,0,0,0,0,1],
                [1,1,1,1,0,1,1,1,2,2,2,1,1,1,0,1,1,1,1],
                [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],
                [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
                [1,3,0,1,0,0,0,0,0,9,0,0,0,0,0,1,0,3,1],
                [1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1],
                [1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1],
                [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
            ];
            function loadLevel() {
                map = JSON.parse(JSON.stringify(baseMap));
                pacman = {x:9, y:9, dX:0, dY:0, nX:0, nY:0, angle:0, mouth:0.2, mDir:1};
                ghosts = [
                    {x:9, y:5, color:'#ff4757', sX:9, sY:5, state:'normal'},
                    {x:8, y:5, color:'#ff6b81', sX:8, sY:5, state:'normal'},
                    {x:10, y:5, color:'#70a1ff', sX:10, sY:5, state:'normal'},
                    {x:9, y:6, color:'#ffa502', sX:9, sY:6, state:'normal'}
                ];
                totalDots=0;
                for(let r=0;r<map.length;r++)for(let c=0;c<map[0].length;c++)if(map[r][c]===0||map[r][c]===3)totalDots++;
            }
            loadLevel();
            let powerTime=0; let speed=Math.max(120, 220-(level*10));

            function update() {
                animationFrame++;
                if(map[pacman.y+pacman.nY][pacman.x+pacman.nX]!==1){pacman.dX=pacman.nX;pacman.dY=pacman.nY;}
                if(map[pacman.y+pacman.dY][pacman.x+pacman.dX]!==1){
                    pacman.x+=pacman.dX; pacman.y+=pacman.dY;
                    if(pacman.dX===1)pacman.angle=0; if(pacman.dX===-1)pacman.angle=Math.PI;
                    if(pacman.dY===-1)pacman.angle=-Math.PI/2; if(pacman.dY===1)pacman.angle=Math.PI/2;
                    pacman.mouth+=0.1*pacman.mDir;
                    if(pacman.mouth>0.4||pacman.mouth<0.05)pacman.mDir*=-1;
                }
                let t=map[pacman.y][pacman.x];
                if(t===0){map[pacman.y][pacman.x]=2;score+=10;totalDots--;}
                else if(t===3){map[pacman.y][pacman.x]=2;score+=50;totalDots--;powerTime=50;ghosts.forEach(g=>g.state='scared');}
                if(totalDots<=0){level++;loadLevel();return;}
                if(powerTime>0){powerTime--;if(powerTime===0)ghosts.forEach(g=>g.state='normal');}
                
                ghosts.forEach(g=>{
                    let dirs=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}];
                    let valid=dirs.filter(d=>map[g.y+d.y][g.x+d.x]!==1);
                    if(valid.length>0){let m=valid[Math.floor(Math.random()*valid.length)]; g.x+=m.x; g.y+=m.y;}
                    if(g.x===pacman.x && g.y===pacman.y){
                        if(g.state==='scared'){score+=200;g.x=g.sX;g.y=g.sY;g.state='normal';}
                        else{lives--;updateUI();if(lives<=0)triggerGameOver(false);else{pacman.x=9;pacman.y=9;pacman.dX=0;pacman.dY=0; ghosts.forEach(gh=>{gh.x=gh.sX;gh.y=gh.sY})}}
                    }
                });
                updateUI(); draw();
            }
            function draw() {
                ctx.fillStyle="black"; ctx.fillRect(0,0,canvas.width,canvas.height);
                for(let r=0;r<map.length;r++)for(let c=0;c<map[0].length;c++){
                    if(map[r][c]===1){
                        ctx.strokeStyle="#00a8ff"; ctx.lineWidth=2; 
                        ctx.strokeRect(c*TILE+4,r*TILE+4,TILE-8,TILE-8);
                        ctx.shadowBlur=10; ctx.shadowColor="#00a8ff";
                        ctx.strokeRect(c*TILE+8,r*TILE+8,TILE-16,TILE-16);
                        ctx.shadowBlur=0;
                    } else if(map[r][c]===0){
                        ctx.fillStyle="#fab1a0"; ctx.beginPath(); ctx.arc(c*TILE+16,r*TILE+16,4,0,Math.PI*2); ctx.fill();
                    } else if(map[r][c]===3){
                        ctx.fillStyle="white"; ctx.shadowBlur=10; ctx.shadowColor="white";
                        ctx.beginPath(); ctx.arc(c*TILE+16,r*TILE+16,(animationFrame%4==0?9:6),0,Math.PI*2); ctx.fill();
                        ctx.shadowBlur=0;
                    }
                }
                let px=pacman.x*TILE+16, py=pacman.y*TILE+16;
                ctx.save(); ctx.translate(px,py); ctx.rotate(pacman.angle);
                ctx.beginPath(); ctx.arc(0,0,13,pacman.mouth*Math.PI,(2-pacman.mouth)*Math.PI); ctx.lineTo(0,0); ctx.fillStyle="#ffeaa7"; ctx.fill(); ctx.restore();
                
                ghosts.forEach(g=>{
                    let gx=g.x*TILE+16, gy=g.y*TILE+16;
                    ctx.fillStyle=(g.state==='scared')?'#74b9ff':g.color;
                    ctx.beginPath(); ctx.arc(gx,gy-4,13,Math.PI,0);
                    ctx.lineTo(gx+13,gy+13); ctx.lineTo(gx,gy+8); ctx.lineTo(gx-13,gy+13); ctx.lineTo(gx-13,gy-4); ctx.fill();
                    ctx.fillStyle="white"; ctx.beginPath(); ctx.arc(gx-5,gy-6,4,0,Math.PI*2); ctx.arc(gx+5,gy-6,4,0,Math.PI*2); ctx.fill();
                    ctx.fillStyle="black"; ctx.beginPath(); ctx.arc(gx-5,gy-6,2,0,Math.PI*2); ctx.arc(gx+5,gy-6,2,0,Math.PI*2); ctx.fill();
                });
            }
            document.onkeydown=e=>{if(activeGame==='pacman'){if(e.key==="ArrowUp"){pacman.nX=0;pacman.nY=-1}if(e.key==="ArrowDown"){pacman.nX=0;pacman.nY=1}if(e.key==="ArrowLeft"){pacman.nX=-1;pacman.nY=0}if(e.key==="ArrowRight"){pacman.nX=1;pacman.nY=0}}};
            gameInterval=setInterval(update, speed);
        }

        // --- 2. SNAKE ---
        function startSnake(){const box=25;snake=[{x:250,y:250}];food={x:100,y:100};snakeDir="RIGHT";let speed=200;function update(){ctx.fillStyle="#222";ctx.fillRect(0,0,500,500);for(let i=0;i<snake.length;i++){ctx.fillStyle=i==0?"#2ecc71":"#27ae60";ctx.fillRect(snake[i].x,snake[i].y,23,23);}ctx.fillStyle="red";ctx.fillRect(food.x,food.y,23,23);let sx=snake[0].x,sy=snake[0].y;if(snakeDir=="L")sx-=box;if(snakeDir=="U")sy-=box;if(snakeDir=="R")sx+=box;if(snakeDir=="D")sy+=box;if(sx==food.x&&sy==food.y){score+=10;level++;speed-=5;clearInterval(gameInterval);gameInterval=setInterval(update,Math.max(50,speed));food={x:Math.floor(Math.random()*19)*box,y:Math.floor(Math.random()*19)*box};updateUI();}else snake.pop();if(sx<0||sx>=500||sy<0||sy>=500||snake.some(s=>s.x===sx&&s.y===sy)){triggerGameOver(false);return;}snake.unshift({x:sx,y:sy});}document.onkeydown=e=>{if(activeGame==='snake'){if(e.key==="ArrowLeft"&&snakeDir!="R")snakeDir="L";if(e.key==="ArrowUp"&&snakeDir!="D")snakeDir="U";if(e.key==="ArrowRight"&&snakeDir!="L")snakeDir="R";if(e.key==="ArrowDown"&&snakeDir!="U")snakeDir="D";}};gameInterval=setInterval(update,speed);}

        // --- 3. TETRIS ---
        function startTetris(){const R=20,C=12,S=20;let board=Array(R).fill().map(()=>Array(C).fill("BLACK"));const P=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]]];let p=newPiece();function newPiece(){return{shape:P[Math.floor(Math.random()*P.length)],x:4,y:0,color:"cyan"};}function draw(){ctx.fillStyle="black";ctx.fillRect(0,0,240,400);board.forEach((r,y)=>r.forEach((c,x)=>{ctx.fillStyle=c;ctx.fillRect(x*S,y*S,S,S);ctx.strokeRect(x*S,y*S,S,S)}));p.shape.forEach((r,y)=>r.forEach((v,x)=>{if(v){ctx.fillStyle=p.color;ctx.fillRect((p.x+x)*S,(p.y+y)*S,S,S);}}));}function coll(x,y,s){return s.some((r,dy)=>r.some((v,dx)=>v&&(p.y+dy+y>=R||p.x+dx+x<0||p.x+dx+x>=C||(p.y+dy+y>=0&&board[p.y+dy+y][p.x+dx+x]!="BLACK"))));}function lock(){p.shape.forEach((r,y)=>r.forEach((v,x)=>{if(v){if(p.y+y<0){triggerGameOver(false);return;}board[p.y+y][p.x+x]=p.color;}}));for(let r=0;r<R;r++)if(board[r].every(c=>c!="BLACK")){board.splice(r,1);board.unshift(Array(C).fill("BLACK"));score+=100;updateUI();}p=newPiece();}function move(){if(!coll(0,1,p.shape))p.y++;else lock();draw();}document.onkeydown=e=>{if(activeGame==='tetris'){if(e.key==="ArrowLeft"&&!coll(-1,0,p.shape))p.x--;if(e.key==="ArrowRight"&&!coll(1,0,p.shape))p.x++;if(e.key==="ArrowDown")move();}};gameInterval=setInterval(move,500);}
    </script>
</body>
</html>
