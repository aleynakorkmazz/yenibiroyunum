<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aleyna Korkmaz | Ki≈üisel Web Sitesi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #e74c3c;
            --accent: #3498db;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --yellow: #f1c40f;
            --success: #27ae60;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; padding: 0;
            background-color: #f4f4f4; color: #333;
        }

        /* Navigasyon */
        nav {
            background-color: var(--primary); color: white; padding: 1rem;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); position: sticky; top: 0; z-index: 1000;
        }
        .nav-links { display: flex; gap: 20px; }
        .nav-item { position: relative; cursor: pointer; padding: 5px 10px; transition: 0.3s; }
        .nav-item:hover { color: var(--accent); }
        .dropdown {
            display: none; position: absolute; background-color: white; color: black;
            top: 100%; left: 0; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 4px; min-width: 180px; z-index: 1001;
        }
        .nav-item:hover .dropdown { display: block; }
        .dropdown div { padding: 10px; border-bottom: 1px solid #eee; transition: 0.3s; }
        .dropdown div:hover { background-color: var(--light); color: var(--secondary); }

        .top-right-info { display: flex; align-items: center; gap: 15px; font-size: 0.9rem; }
        .version { background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: 4px; font-weight: bold; }
        .log-btn {
            background-color: var(--secondary); border: none; color: white;
            padding: 5px 15px; border-radius: 20px; cursor: pointer; transition: 0.3s;
        }
        .log-btn:hover { background-color: #c0392b; }

        /* Ana ƒ∞√ßerik */
        header.hero {
            text-align: center; padding: 50px 20px;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); color: white;
        }
        .hero h1 { margin: 0; font-size: 2.5rem; }
        .hero p { font-size: 1.2rem; margin-top: 10px; opacity: 0.9; }

        .container {
            max-width: 1100px; margin: 20px auto; padding: 20px;
            background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            min-height: 400px;
        }

        /* DERS NOTLARI STƒ∞Lƒ∞ */
        .grade-selector { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
        .grade-btn {
            padding: 12px 25px; background: var(--primary); color: white; border: none;
            border-radius: 25px; cursor: pointer; font-size: 1.1rem; transition: 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .grade-btn:hover { background: var(--accent); transform: translateY(-3px); }
        .grade-btn.active { background: var(--secondary); }

        .subject-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .subject-card {
            background: #fff; border: 1px solid #eee; border-radius: 10px; overflow: hidden;
            transition: 0.3s; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .subject-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); border-color: var(--accent); }
        .subject-header {
            background: var(--accent); color: white; padding: 15px; text-align: center; font-weight: bold;
        }
        .subject-body { padding: 15px; text-align: center; color: #666; font-size: 0.9rem; }

        /* Konu Detay Modal */
        #topicModal .modal-content { max-width: 800px; text-align: left; }
        .topic-list { list-style: none; padding: 0; }
        .topic-item {
            background: #f9f9f9; border-left: 4px solid var(--success); margin-bottom: 10px;
            padding: 15px; border-radius: 0 5px 5px 0;
        }
        .topic-title { font-weight: bold; color: var(--dark); display: block; margin-bottom: 5px; }
        .topic-desc { color: #555; font-size: 0.95rem; }

        /* OYUN STƒ∞LLERƒ∞ */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 2000;
        }
        .modal-content {
            background: white; padding: 20px; border-radius: 8px;
            max-width: 800px; width: 95%; position: relative; max-height: 90vh; overflow-y: auto;
        }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer; color: #aaa; }
        .close-btn:hover { color: black; }

        #game-modal-content {
            background: #222; color: white; text-align: center;
            display: flex; flex-direction: column; align-items: center;
            border: 1px solid #333; position: relative;
        }
        canvas { background-color: #000; display: block; border: 4px solid #444; margin: 10px auto; }
        
        .game-info-panel {
            display: flex; gap: 20px; margin-top: 10px; background: #333; padding: 10px 20px; border-radius: 20px;
        }
        .game-stat { font-family: monospace; font-size: 1.2rem; }
        .game-stat span { color: var(--yellow); font-weight: bold; }

        .game-overlay {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); flex-direction: column; justify-content: center; align-items: center; z-index: 10;
        }
        .game-overlay h2 { color: #e74c3c; font-size: 2.5rem; margin-bottom: 10px; }
        .overlay-btn {
            background: var(--accent); color: white; border: none; padding: 12px 30px;
            font-size: 1.1rem; cursor: pointer; margin: 5px; border-radius: 5px;
        }

        table.log-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .log-table th, .log-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .log-table th { background-color: var(--primary); color: white; }

        footer { text-align: center; padding: 20px; background-color: var(--primary); color: white; margin-top: 40px; }
    </style>
</head>
<body>

    <nav>
        <div class="logo"><i class="fa-solid fa-code"></i> Aleyna Korkmaz</div>
        <div class="nav-links">
            <div class="nav-item">
                <i class="fa-solid fa-gamepad"></i> Oyunlar
                <div class="dropdown">
                    <div onclick="initGame('tetris')"><i class="fa-solid fa-shapes"></i> Tetris</div>
                    <div onclick="initGame('pacman')"><i class="fa-solid fa-ghost"></i> Pacman (B√ºy√ºk)</div>
                    <div onclick="initGame('snake')"><i class="fa-solid fa-staff-snake"></i> Yƒ±lan (3D Stil)</div>
                </div>
            </div>
            <div class="nav-item" onclick="showSection('notes')"><i class="fa-solid fa-book"></i> Ders Notlarƒ±</div>
            <div class="nav-item" onclick="showSection('movies')"><i class="fa-solid fa-film"></i> Filmler</div>
        </div>
        <div class="top-right-info">
            <span class="version">v1.6.0</span>
            <button class="log-btn" onclick="toggleLog()"><i class="fa-solid fa-clipboard-list"></i> G√ºnl√ºk</button>
        </div>
    </nav>

    <header class="hero">
        <h1>Ho≈ü Geldiniz</h1>
        <p>Ben Aleyna Korkmaz. Matematik √ñƒürencisi & Veri Analisti Adayƒ±.</p>
        <p style="font-size: 0.9rem; margin-top:5px;">Python | SQL | Veri Analizi | Oyun Geli≈ütirme</p>
    </header>

    <div class="container" id="main-content">
        <h2>Hakkƒ±mda</h2>
        <p>Merhaba! ƒ∞stanbul √úniversitesi Matematik b√∂l√ºm√º √∂ƒürencisiyim. Bu sitede geli≈ütirdiƒüim geli≈ümi≈ü oyunlarƒ± oynayabilir veya lise m√ºfredatƒ±na uygun detaylƒ± ders notlarƒ±na ula≈üabilirsiniz.</p>
        <div id="dynamic-content"></div>
    </div>

    <div id="logModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="toggleLog()">&times;</span>
            <h3><i class="fa-solid fa-history"></i> Geli≈ütirme G√ºnl√ºƒü√º</h3>
            <table class="log-table">
                <thead><tr><th>Tarih</th><th>S√ºr√ºm</th><th>Detaylar</th></tr></thead>
                <tbody id="logTableBody"></tbody>
            </table>
        </div>
    </div>

    <div id="topicModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeTopicModal()">&times;</span>
            <h3 id="topicModalTitle" style="color:var(--primary); border-bottom:2px solid #eee; padding-bottom:10px;"></h3>
            <ul id="topicList" class="topic-list"></ul>
        </div>
    </div>

    <div id="gameModal" class="modal">
        <div class="modal-content" id="game-modal-content">
            <span class="close-btn" onclick="stopGame()" style="color: white; right: 20px; z-index:100;">&times;</span>
            <h3 id="gameTitle" style="margin: 10px 0; color: #f1c40f;">Oyun</h3>
            
            <div style="position: relative;">
                <div id="gameOverOverlay" class="game-overlay">
                    <h2 id="overlayTitle">OYUN Bƒ∞TTƒ∞!</h2>
                    <p style="font-size:1.5rem;">Skor: <span id="finalScore">0</span></p>
                    <button class="overlay-btn" onclick="restartActiveGame()">Tekrar Oyna</button>
                    <button class="overlay-btn" style="background:#555;" onclick="stopGame()">√áƒ±kƒ±≈ü</button>
                </div>
                <canvas id="gameCanvas"></canvas>
            </div>

            <div class="game-info-panel">
                <div class="game-stat">Skor: <span id="scoreVal">0</span></div>
                <div class="game-stat">Seviye: <span id="levelVal">1</span></div>
                <div class="game-stat" id="livesContainer">Can: <span id="livesVal">3</span></div>
            </div>
            <p style="color: #bbb; font-size: 0.8rem; margin-top: 10px;">Y√∂n tu≈ülarƒ± ile oynayƒ±n.</p>
        </div>
    </div>

    <footer><p>&copy; 2026 Aleyna Korkmaz.</p></footer>

    <script>
        /* --- VERƒ∞LER --- */
        const logs = [
            { date: "10.02.2026", version: "1.6.0", text: "Pacman boyutu b√ºy√ºt√ºld√º, hayaletler ger√ßek√ßi √ßizildi ve yava≈ülatƒ±ldƒ±. Yƒ±lan 3D formuna kavu≈ütu. Ders notlarƒ± t√ºm m√ºfredatla geni≈ületildi." },
            { date: "09.02.2026", version: "1.5.0", text: "Pacman Klasik Mod." }
        ];

        // M√úFREDAT VERƒ∞TABANI
        const curriculum = {
            "Matematik": [
                { title: "Mantƒ±k", desc: "√ñnermeler, Ve/Veya/ƒ∞se baƒüla√ßlarƒ±, Totoloji." },
                { title: "K√ºmeler", desc: "Birle≈üim, Kesi≈üim ve Kartezyen √áarpƒ±m." },
                { title: "Denklem ve E≈üitsizlikler", desc: "Sayƒ± k√ºmeleri, √ºsl√º ve k√∂kl√º sayƒ±lar, oran-orantƒ±." },
                { title: "Fonksiyonlar", desc: "Tanƒ±m ve g√∂r√ºnt√º k√ºmesi, fonksiyon grafikleri." },
                { title: "Polinomlar", desc: "Polinomlarda b√∂lme ve √ßarpanlara ayƒ±rma." },
                { title: "Trigonometri", desc: "Sin√ºs, Kosin√ºs, Tanjant ve Birim √áember d√ºnyasƒ±." },
                { title: "Limit ve T√ºrev", desc: "Anlƒ±k deƒüi≈üim oranlarƒ± ve teƒüet eƒüimleri." },
                { title: "ƒ∞ntegral", desc: "Eƒüri altƒ±nda kalan alan hesabƒ± ve Riemann toplamƒ±." }
            ],
            "Fizik": [
                { title: "Fizik Bilimine Giri≈ü", desc: "Temel ve t√ºretilmi≈ü b√ºy√ºkl√ºkler, vekt√∂rler." },
                { title: "Madde ve √ñzellikleri", desc: "K√ºtle, hacim, √∂zk√ºtle, dayanƒ±klƒ±lƒ±k." },
                { title: "Hareket ve Kuvvet", desc: "Newton'un Hareket Yasalarƒ±, Hƒ±z ve ƒ∞vme." },
                { title: "Enerji", desc: "Kinetik, Potansiyel ve Mekanik Enerji korunumu." },
                { title: "Elektrik ve Manyetizma", desc: "Elektrik alan, devreler ve mƒ±knatƒ±slar." },
                { title: "Optik", desc: "I≈üƒ±k, g√∂lge, yansƒ±ma ve aynalar." }
            ],
            "Kimya": [
                { title: "Kimya Bilimi", desc: "Simyadan kimyaya ge√ßi≈ü, elementler ve semboller." },
                { title: "Atom ve Yapƒ±sƒ±", desc: "Proton, n√∂tron, elektron ve periyodik sistem." },
                { title: "Kimyasal T√ºrler", desc: "ƒ∞yonik, kovalent ve metalik baƒülar." },
                { title: "Maddenin Halleri", desc: "Katƒ±, sƒ±vƒ±, gaz ve plazma √∂zellikleri." },
                { title: "Asitler, Bazlar ve Tuzlar", desc: "pH kavramƒ±, n√∂tralle≈üme tepkimeleri." },
                { title: "Organik Kimya", desc: "Karbon kimyasƒ±, hidrokarbonlar ve fonksiyonel gruplar." }
            ],
            "Biyoloji": [
                { title: "Ya≈üam Bilimi", desc: "Canlƒ±larƒ±n ortak √∂zellikleri, inorganik ve organik bile≈üikler." },
                { title: "H√ºcre", desc: "H√ºcre zarƒ±, organeller ve madde ge√ßi≈üleri." },
                { title: "Canlƒ±lar D√ºnyasƒ±", desc: "Sƒ±nƒ±flandƒ±rma, bakteriler, bitkiler ve hayvanlar." },
                { title: "H√ºcre B√∂l√ºnmeleri", desc: "Mitoz ve Mayoz b√∂l√ºnme evreleri." },
                { title: "Kalƒ±tƒ±m", desc: "Mendel genetiƒüi, kan gruplarƒ± ve soyaƒüa√ßlarƒ±." },
                { title: "Ekosistem Ekolojisi", desc: "Besin zinciri, madde d√∂ng√ºleri ve biyo√ße≈üitlilik." }
            ],
            "Tarih": [
                { title: "Tarih ve Zaman", desc: "Tarihin tanƒ±mƒ±, kaynaklar ve takvimler." },
                { title: "ƒ∞lk √áaƒü Uygarlƒ±klarƒ±", desc: "Mezopotamya, Mƒ±sƒ±r, Anadolu uygarlƒ±klarƒ±." },
                { title: "ƒ∞slamiyet √ñncesi T√ºrkler", desc: "Asya Hun, G√∂kt√ºrk ve Uygur devletleri." },
                { title: "ƒ∞slam Tarihi", desc: "Hz. Muhammed d√∂nemi, D√∂rt Halife ve Emeviler." },
                { title: "Osmanlƒ± Tarihi", desc: "Kurulu≈ü, Y√ºkselme ve Daƒüƒ±lma d√∂nemleri." },
                { title: "ƒ∞nkƒ±lap Tarihi", desc: "Kurtulu≈ü Sava≈üƒ± ve Atat√ºrk ƒ∞lke ve ƒ∞nkƒ±laplarƒ±." }
            ],
            "Coƒürafya": [
                { title: "Doƒüa ve ƒ∞nsan", desc: "Coƒürafyanƒ±n b√∂l√ºmleri ve insan-doƒüa etkile≈üimi." },
                { title: "D√ºnya'nƒ±n ≈ûekli ve Hareketi", desc: "Gece-g√ºnd√ºz, mevsimler ve koordinat sistemi." },
                { title: "Harita Bilgisi", desc: "√ñl√ßekler, projeksiyonlar ve izohipsler." },
                { title: "ƒ∞klim Bilgisi", desc: "Sƒ±caklƒ±k, basƒ±n√ß, r√ºzgarlar ve iklim tipleri." },
                { title: "N√ºfus ve Yerle≈üme", desc: "N√ºfus daƒüƒ±lƒ±≈üƒ±, g√∂√ßler ve yerle≈üme tipleri." }
            ]
        };

        /* --- Sƒ∞TE Y√ñNETƒ∞Mƒ∞ --- */
        function toggleLog() {
            const modal = document.getElementById('logModal');
            const tbody = document.getElementById('logTableBody');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
            if(modal.style.display === 'flex') tbody.innerHTML = logs.map(l => `<tr><td>${l.date}</td><td>${l.version}</td><td>${l.text}</td></tr>`).join('');
        }

        function showSection(section) {
            const content = document.getElementById('dynamic-content');
            if (section === 'notes') {
                content.innerHTML = `
                    <h3>üìö Lise Ders Notlarƒ± ve M√ºfredat</h3>
                    <p style="text-align:center; margin-bottom:20px;">√ñƒürenmek istediƒüin dersi se√ß, konularƒ± ke≈üfet!</p>
                    <div class="subject-grid">
                        ${Object.keys(curriculum).map(subject => `
                            <div class="subject-card" onclick="openTopicModal('${subject}')">
                                <div class="subject-header">${subject}</div>
                                <div class="subject-body">${curriculum[subject].length} Ana Konu</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (section === 'movies') {
                content.innerHTML = `<h3>üé¨ Filmler</h3><p>Film listesi hazƒ±rlanƒ±yor...</p>`;
            } else { content.innerHTML = ""; }
        }

        function openTopicModal(subject) {
            const modal = document.getElementById('topicModal');
            document.getElementById('topicModalTitle').innerText = subject + " Konularƒ±";
            const list = document.getElementById('topicList');
            list.innerHTML = curriculum[subject].map(t => `
                <li class="topic-item">
                    <span class="topic-title">${t.title}</span>
                    <span class="topic-desc">${t.desc}</span>
                </li>
            `).join('');
            modal.style.display = 'flex';
        }

        function closeTopicModal() {
            document.getElementById('topicModal').style.display = 'none';
        }

        /* --- OYUN MOTORU --- */
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const overlay = document.getElementById('gameOverOverlay');
        let gameInterval, activeGame = null;
        let score=0, level=1, lives=3;
        
        // Deƒüi≈ükenler
        let pacman, ghosts, map, totalDots, snake, food, snakeDir, tetrisBoard, tetrisPiece;

        function initGame(gameName) {
            document.getElementById('gameModal').style.display = 'flex';
            activeGame = gameName;
            restartActiveGame();
        }

        function stopGame() {
            clearInterval(gameInterval);
            document.getElementById('gameModal').style.display = 'none';
        }

        function restartActiveGame() {
            overlay.style.display = 'none';
            score = 0; level = 1; lives = 3;
            updateUI();
            clearInterval(gameInterval);

            if(activeGame === 'tetris') {
                canvas.width = 240; canvas.height = 400;
                document.getElementById('livesContainer').style.display = 'none';
                startTetris();
            } else if(activeGame === 'pacman') {
                // B√úY√úK BOYUT: 19 blok * 30px = 570px geni≈ülik
                canvas.width = 570; canvas.height = 390; 
                document.getElementById('livesContainer').style.display = 'block';
                startPacman();
            } else if(activeGame === 'snake') {
                canvas.width = 500; canvas.height = 500;
                document.getElementById('livesContainer').style.display = 'none';
                startSnake();
            }
        }

        function updateUI() {
            document.getElementById('scoreVal').innerText = score;
            document.getElementById('levelVal').innerText = level;
            document.getElementById('livesVal').innerText = "‚ù§Ô∏è".repeat(lives);
        }

        function triggerGameOver(win = false) {
            clearInterval(gameInterval);
            document.getElementById('overlayTitle').innerText = win ? "KAZANDIN!" : "OYUN Bƒ∞TTƒ∞!";
            document.getElementById('overlayTitle').style.color = win ? "#2ecc71" : "#e74c3c";
            document.getElementById('finalScore').innerText = score;
            overlay.style.display = 'flex';
        }

        /* ==================== 1. PACMAN (Geli≈ümi≈ü G√∂rsel & Yava≈ü) ==================== */
        function startPacman() {
            document.getElementById('gameTitle').innerText = "Pacman (B√ºy√ºk & Klasik)";
            const TILE = 30; // Blok boyutu b√ºy√ºd√º
            const baseMap = [
                [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                [1,3,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,3,1],
                [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
                [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                [1,0,1,1,0,1,0,1,1,2,1,1,0,1,0,1,1,0,1],
                [1,0,0,0,0,1,0,2,2,2,2,2,0,1,0,0,0,0,1],
                [1,1,1,1,0,1,1,1,2,2,2,1,1,1,0,1,1,1,1],
                [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],
                [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
                [1,3,0,1,0,0,0,0,0,9,0,0,0,0,0,1,0,3,1],
                [1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1],
                [1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1],
                [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
            ];

            function loadLevel() {
                map = JSON.parse(JSON.stringify(baseMap));
                pacman = {x: 9, y: 9, dX:0, dY:0, nX:0, nY:0, angle:0};
                ghosts = [
                    {x:9, y:5, color:'red', startX:9, startY:5, state:'normal'},
                    {x:8, y:5, color:'pink', startX:8, startY:5, state:'normal'},
                    {x:10, y:5, color:'cyan', startX:10, startY:5, state:'normal'},
                    {x:9, y:6, color:'orange', startX:9, startY:6, state:'normal'}
                ];
                totalDots = 0;
                for(let r=0; r<map.length; r++) for(let c=0; c<map[0].length; c++) 
                    if(map[r][c]===0 || map[r][c]===3) totalDots++;
            }
            loadLevel();

            let powerTime = 0;
            // Hƒ±z: Yava≈ülatƒ±ldƒ± (250ms ba≈ülangƒ±√ß)
            let gameSpeed = Math.max(150, 250 - (level * 10));

            function update() {
                // Pacman Y√∂n
                if(map[pacman.y+pacman.nY][pacman.x+pacman.nX] !== 1) { pacman.dX=pacman.nX; pacman.dY=pacman.nY; }
                if(map[pacman.y+pacman.dY][pacman.x+pacman.dX] !== 1) {
                    pacman.x += pacman.dX; pacman.y += pacman.dY;
                    if(pacman.dX===1) pacman.angle=0; if(pacman.dX===-1) pacman.angle=Math.PI;
                    if(pacman.dY===-1) pacman.angle=-Math.PI/2; if(pacman.dY===1) pacman.angle=Math.PI/2;
                }

                // Yem
                let tile = map[pacman.y][pacman.x];
                if(tile === 0) { map[pacman.y][pacman.x] = 2; score += 10; totalDots--; } 
                else if(tile === 3) { 
                    map[pacman.y][pacman.x] = 2; score += 50; totalDots--;
                    powerTime = 50; ghosts.forEach(g => g.state = 'scared');
                }

                if(totalDots <= 0) { alert("TEBRƒ∞KLER! Seviye " + level + " tamamlandƒ±."); level++; loadLevel(); return; }
                if(powerTime > 0) { powerTime--; if(powerTime === 0) ghosts.forEach(g => g.state = 'normal'); }

                // Hayalet Yapay Zeka
                ghosts.forEach(g => {
                    let dirs = [{x:0, y:-1}, {x:0, y:1}, {x:-1, y:0}, {x:1, y:0}];
                    let valid = dirs.filter(d => map[g.y+d.y][g.x+d.x] !== 1);
                    if(valid.length > 0) {
                        let move = valid[Math.floor(Math.random() * valid.length)];
                        g.x += move.x; g.y += move.y;
                    }
                    if(g.x === pacman.x && g.y === pacman.y) {
                        if(g.state === 'scared') {
                            score += 200; g.x = g.startX; g.y = g.startY; g.state = 'normal';
                        } else {
                            lives--; updateUI();
                            if(lives <= 0) triggerGameOver(false);
                            else { pacman.x=9; pacman.y=9; pacman.dX=0; pacman.dY=0; ghosts.forEach(gh => { gh.x=gh.startX; gh.y=gh.startY; }); }
                        }
                    }
                });
                updateUI(); draw();
            }

            function draw() {
                ctx.fillStyle = "black"; ctx.fillRect(0,0,canvas.width, canvas.height);
                for(let r=0; r<map.length; r++){ for(let c=0; c<map[0].length; c++){
                    if(map[r][c]===1) { ctx.fillStyle="#2c3e50"; ctx.fillRect(c*TILE, r*TILE, TILE, TILE); }
                    else if(map[r][c]===0) { ctx.fillStyle="#ffb897"; ctx.beginPath(); ctx.arc(c*TILE+TILE/2, r*TILE+TILE/2, 4,0,Math.PI*2); ctx.fill(); }
                    else if(map[r][c]===3) { ctx.fillStyle="white"; ctx.beginPath(); ctx.arc(c*TILE+TILE/2, r*TILE+TILE/2, 8,0,Math.PI*2); ctx.fill(); }
                }}
                
                // Pacman
                ctx.save(); ctx.translate(pacman.x*TILE+TILE/2, pacman.y*TILE+TILE/2); ctx.rotate(pacman.angle);
                ctx.beginPath(); ctx.arc(0,0,TILE/2-2, 0.2*Math.PI, 1.8*Math.PI); ctx.lineTo(0,0); ctx.fillStyle="yellow"; ctx.fill(); ctx.restore();
                
                // Hayaletler (Geli≈ümi≈ü √áizim)
                ghosts.forEach(g => {
                    let gx = g.x*TILE + TILE/2;
                    let gy = g.y*TILE + TILE/2;
                    let color = (g.state === 'scared') ? '#3498db' : g.color;
                    
                    ctx.fillStyle = color;
                    ctx.beginPath();
                    // Kafa (Yarƒ±m Daire)
                    ctx.arc(gx, gy - 2, TILE/2 - 2, Math.PI, 0);
                    ctx.lineTo(gx + TILE/2 - 2, gy + TILE/2 - 2);
                    // Ayaklar (Tƒ±rtƒ±klƒ±)
                    for(let i=1; i<=3; i++) {
                        ctx.lineTo(gx + TILE/2 - 2 - (i*((TILE-4)/3)), (i%2==0 ? gy+TILE/2-5 : gy+TILE/2-2));
                    }
                    ctx.lineTo(gx - TILE/2 + 2, gy - 2);
                    ctx.fill();

                    // G√∂zler
                    ctx.fillStyle = "white";
                    ctx.beginPath(); ctx.arc(gx - 4, gy - 4, 4, 0, Math.PI*2); ctx.fill();
                    ctx.beginPath(); ctx.arc(gx + 4, gy - 4, 4, 0, Math.PI*2); ctx.fill();
                    ctx.fillStyle = "blue";
                    ctx.beginPath(); ctx.arc(gx - 4, gy - 4, 2, 0, Math.PI*2); ctx.fill();
                    ctx.beginPath(); ctx.arc(gx + 4, gy - 4, 2, 0, Math.PI*2); ctx.fill();
                });
            }
            document.onkeydown = e => {
                if(activeGame!=='pacman') return;
                if(e.key==="ArrowUp"){pacman.nX=0;pacman.nY=-1;} if(e.key==="ArrowDown"){pacman.nX=0;pacman.nY=1;}
                if(e.key==="ArrowLeft"){pacman.nX=-1;pacman.nY=0;} if(e.key==="ArrowRight"){pacman.nX=1;pacman.nY=0;}
            };
            gameInterval = setInterval(update, gameSpeed);
        }

        /* ==================== 2. YILAN (3D/Ger√ßek√ßi) ==================== */
        function startSnake() {
            document.getElementById('gameTitle').innerText = "Yƒ±lan";
            const box = 25; // Kare boyutu
            snake = [{x: 10*box, y: 10*box}];
            food = {x: Math.floor(Math.random()*20)*box, y: Math.floor(Math.random()*20)*box};
            snakeDir = "RIGHT";
            let speed = 200;

            function update() {
                ctx.fillStyle = "#222"; ctx.fillRect(0,0,canvas.width, canvas.height);
                
                // Izgara (Estetik)
                ctx.strokeStyle="#333"; ctx.lineWidth=1;
                for(let i=0;i<canvas.width;i+=box){ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,canvas.height);ctx.stroke();}
                for(let i=0;i<canvas.height;i+=box){ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(canvas.width,i);ctx.stroke();}

                // Yƒ±lan G√∂vdesi ve Ba≈üƒ±
                for(let i=0; i<snake.length; i++){
                    ctx.fillStyle = (i==0) ? "#2ecc71" : "#27ae60";
                    // Yuvarlak hatlar
                    ctx.beginPath();
                    ctx.roundRect(snake[i].x+1, snake[i].y+1, box-2, box-2, 8);
                    ctx.fill();

                    // Kafa i√ßin G√∂zler
                    if(i==0) {
                        ctx.fillStyle="white";
                        let ex=snake[i].x, ey=snake[i].y;
                        if(snakeDir=="RIGHT"){ctx.fillRect(ex+18, ey+5, 4,4); ctx.fillRect(ex+18, ey+16, 4,4);}
                        if(snakeDir=="LEFT"){ctx.fillRect(ex+3, ey+5, 4,4); ctx.fillRect(ex+3, ey+16, 4,4);}
                        if(snakeDir=="UP"){ctx.fillRect(ex+5, ey+3, 4,4); ctx.fillRect(ex+16, ey+3, 4,4);}
                        if(snakeDir=="DOWN"){ctx.fillRect(ex+5, ey+18, 4,4); ctx.fillRect(ex+16, ey+18, 4,4);}
                    }
                }
                
                // Yemek
                ctx.fillStyle = "#e74c3c";
                ctx.beginPath(); ctx.arc(food.x+box/2, food.y+box/2, box/2-2, 0, Math.PI*2); ctx.fill();

                let sx = snake[0].x; let sy = snake[0].y;
                if(snakeDir=="LEFT") sx-=box; if(snakeDir=="UP") sy-=box; if(snakeDir=="RIGHT") sx+=box; if(snakeDir=="DOWN") sy+=box;

                if(sx==food.x && sy==food.y){
                    score+=10; level++; speed = Math.max(50, speed-10);
                    clearInterval(gameInterval); gameInterval=setInterval(update, speed);
                    food={x:Math.floor(Math.random()*20)*box, y:Math.floor(Math.random()*20)*box};
                    updateUI();
                } else { snake.pop(); }

                let newHead = {x:sx, y:sy};
                if(sx<0 || sx>=canvas.width || sy<0 || sy>=canvas.height || snake.some(s=>s.x===sx && s.y===sy)){
                    triggerGameOver(false); return;
                }
                snake.unshift(newHead);
            }
            document.onkeydown = e => {
                if(activeGame!=='snake') return;
                if(e.key==="ArrowLeft" && snakeDir!="RIGHT") snakeDir="LEFT";
                else if(e.key==="ArrowUp" && snakeDir!="DOWN") snakeDir="UP";
                else if(e.key==="ArrowRight" && snakeDir!="LEFT") snakeDir="RIGHT";
                else if(e.key==="ArrowDown" && snakeDir!="UP") snakeDir="DOWN";
            };
            gameInterval = setInterval(update, speed);
        }

        /* ==================== 3. TETRIS (Standart) ==================== */
        function startTetris() {
            document.getElementById('gameTitle').innerText = "Tetris";
            const ROW=20, COL=12, SQ=20, VACANT="BLACK";
            tetrisBoard = [];
            for(let r=0; r<ROW; r++){ tetrisBoard[r]=[]; for(let c=0; c<COL; c++) tetrisBoard[r][c]=VACANT; }
            const PIECES = [ [Z,"red"], [S,"green"], [T,"purple"], [O,"yellow"], [L,"orange"], [I,"cyan"], [J,"blue"] ];
            function drawSquare(x,y,color){ ctx.fillStyle=color; ctx.fillRect(x*SQ,y*SQ,SQ,SQ); ctx.strokeStyle="#333"; ctx.strokeRect(x*SQ,y*SQ,SQ,SQ); }
            function drawBoard(){ for(let r=0; r<ROW; r++) for(let c=0; c<COL; c++) drawSquare(c,r,tetrisBoard[r][c]); }
            function Piece(tetromino, color){ this.tetromino=tetromino; this.color=color; this.tetrominoN=0; this.activeTetromino=this.tetromino[this.tetrominoN]; this.x=4; this.y=0; }
            Piece.prototype.fill = function(color){ for(let r=0; r<this.activeTetromino.length; r++) for(let c=0; c<this.activeTetromino.length; c++) if(this.activeTetromino[r][c]) drawSquare(this.x+c, this.y+r, color); }
            Piece.prototype.draw = function(){ this.fill(this.color); }
            Piece.prototype.unDraw = function(){ this.fill(VACANT); }
            Piece.prototype.moveDown = function(){
                if(!this.collision(0,1,this.activeTetromino)){ this.unDraw(); this.y++; this.draw(); } else { this.lock(); tetrisPiece = randomPiece(); }
            }
            Piece.prototype.collision = function(x,y,piece){
                for(let r=0; r<piece.length; r++) for(let c=0; c<piece.length; c++){
                    if(!piece[r][c]) continue;
                    let nX = this.x+c+x; let nY = this.y+r+y;
                    if(nX<0 || nX>=COL || nY>=ROW) return true;
                    if(nY<0) continue;
                    if(tetrisBoard[nY][nX] != VACANT) return true;
                } return false;
            }
            Piece.prototype.lock = function(){
                for(let r=0; r<this.activeTetromino.length; r++) for(let c=0; c<this.activeTetromino.length; c++){
                    if(!this.activeTetromino[r][c]) continue;
                    if(this.y + r <= 0){ triggerGameOver(false); return; }
                    tetrisBoard[this.y+r][this.x+c] = this.color;
                }
                for(let r=0; r<ROW; r++){
                    let isRowFull = true; for(let c=0; c<COL; c++) isRowFull = isRowFull && (tetrisBoard[r][c]!=VACANT);
                    if(isRowFull){
                        for(let y=r; y>1; y--) for(let c=0; c<COL; c++) tetrisBoard[y][c] = tetrisBoard[y-1][c];
                        for(let c=0; c<COL; c++) tetrisBoard[0][c] = VACANT;
                        score += 100; updateUI();
                    }
                }
                if(score >= 1000) { triggerGameOver(true); return; }
                drawBoard();
            }
            Piece.prototype.rotate = function(){
                let next = this.tetromino[(this.tetrominoN+1)%this.tetromino.length];
                let kick=0; if(this.collision(0,0,next)) kick = (this.x>COL/2) ? -1 : 1;
                if(!this.collision(kick,0,next)){ this.unDraw(); this.x+=kick; this.tetrominoN=(this.tetrominoN+1)%this.tetromino.length; this.activeTetromino=this.tetromino[this.tetrominoN]; this.draw(); }
            }
            Piece.prototype.moveRight = function(){ if(!this.collision(1,0,this.activeTetromino)){this.unDraw();this.x++;this.draw();} }
            Piece.prototype.moveLeft = function(){ if(!this.collision(-1,0,this.activeTetromino)){this.unDraw();this.x--;this.draw();} }
            function randomPiece(){ let r=Math.floor(Math.random()*PIECES.length); return new Piece(PIECES[r][0], PIECES[r][1]); }
            tetrisPiece = randomPiece(); drawBoard();
            document.onkeydown = e => {
                if(activeGame!=='tetris') return;
                if(e.key==="ArrowLeft") tetrisPiece.moveLeft(); else if(e.key==="ArrowRight") tetrisPiece.moveRight();
                else if(e.key==="ArrowUp") tetrisPiece.rotate(); else if(e.key==="ArrowDown") tetrisPiece.moveDown();
            };
            gameInterval = setInterval(()=>tetrisPiece.moveDown(), 500);
        }
        const I=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]], J=[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]], L=[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]], O=[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]], S=[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]], T=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]], Z=[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]];
    </script>
</body>
</html>
